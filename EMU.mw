== EMU (Enhanced Mini USB) ==

The A780 has a mini USB connector that motorola calls "Enhanced Mini USB" or in short "EMU". The Enhancement consists of several different modes that the port can be be swicthed into. The different modes are implemented by several analog CMOS switches and MOSFETs, which are controlled by the PCAP chip. Pin4 of the mini USB port is connected to a ADC inside the PCAP so that the voltage level on this pin can be measured by the BP, in order to identify a connected peripherial by simple resistor voltage dividers.

* Ordinary USB client, (i.e. the phone can emulate usb storage, usb modem etc, and charge the battery from the 5 volt USB supply)
* Charger., In this mode, the phone draws more current (up to 1,25A instead of the 500ma limit of USB host ports). 
* Car Charger,  
* Headset Interface (stereo audio out, mono mic in)
* A Async Serial Port (3volt / 0 volt logic level)
* A Factory Test and Flash Interface

The A780 has a mini USB connector that has some alternate pinout / functions.
There is code in the kernel sources /drivers/misc/ezx-emu.c.

== Charging modes ==
There are at least two different charging modes.
* Mode 1: The battery is '''not''' completely discharged. The CPU is running and can decide which kind of USB cable is attached. Power only or also data connection. In this mode you can use charging with USB data cable and USB power supply.
* Mode 2: The battery is '''completely discharged'''. The CPU is '''not''' running and so it could be not decided which kind of USB cable is attached. In this mode you can only use charging with USB power supply.


== Normal USB device/accesory mode ==

Pinout :
* 1 +5 volts input used to charge the phones battery at max 500ma.
* 2 Data-
* 3 Data+
* 4 (NC/left open) voltage at adc aprox 2,4-2,8 volt (there seems to be an internal pullup resistor of unknown value)
* 5 GND

In this mode, the Data- and Data+ lines will be routed to a USB transceiver located in PCAP chip, which is connected to the AP (PXA270) via the USB2 single ended interface (GPIO pins 34,35,36,39, 40, and 53). There is a 1,5kohm pullup resistor between the D+ as required by the USB standard to signal a high speed device (12mbits). This resistor is switchable by the PCAP bit BUSCTRL_USB_PU (+3,3volt or high Z). There is a second switchable pullup resistor on the d+ line which is used for charger detection.  This resistor seems to be switched off (high Z) when setting the PCAP bit BUSCTRL_VUSB_MSTR_EN. However this does not happen instantly but with some delay (about 5-10 sec).
It doesn't happen every time I tried. About 1 in 10 times it didn't work. It apears as if the firmware of the Baseband Processor is scanning from time to time the PCAP bits and then switches the resistor accordingly. I speculate therefore this resistor is connected to a GPIO on the Baseband processor and thats why there is no code in motorolas kernel.

== UART mode ==

Pinout :
* 1 NC
* 2 TXD
* 3 RXD
* 4 ???
* 5 GND

The routing of the analog switches is exactly the same as in USB client mode, but inside the PCAP chip, the USB transceiver is bypassed. TXD is bypassed to GPIO 39 of the AP (which is then TXD of FFUART) and RXD is bypassed to GPIO 53 (which is then RXD of FFUART). 
See drivers/misc/ezx-emu.c of the original kernel for code.

== Simple Charger ==

Pinout :
* 1 + 5 volts @ 500 ma
* 2 Short to pin 3
* 3 Short to pin 2
* 4 200kohm pulldown
* 5 GND

The Short between pin2 and pin3 is detected by a 200kohm pullup resistor on pin3 / d+ and a voltage comparator comparing pin2 and pin3.
It seems to be possible to switch this pullup resistor off by software.

Instead of having to do a short between pin 2 and 3, a pullup resistor between pin2 and pin1 (+5Vdc) can be used (50 or 100kOhm).

[[http://failtoexpress.freehostia.com/html/frankie-fuck.htm frankie fuck oyu back]] [[http://www.freewebtown.com/prncessprncipe/library/html/www-avis.htm www avis]] [[http://selemku.t35.com/text/directory/modern-times.htm modern times di jfive]] [[http://greensticky.freehostia.com/library/html/entusiasmo/ entusiasmo]] [[http://kopapguw.homeblock.com/topic/account-manager/ account manager (regione lombardia - milano provincia)]] [[http://grahrens.125mb.com/view/new/la-cafetera/ la cafetera com]] [[http://getm0ney.freewebpage.org/lib/i-abbigliamento/ i abbigliamento da uomo]] [[http://failtoexpress.freehostia.com/html/ubbcluj-ro.htm ubbcluj ro]] [[http://gawelzba.t35.com/library/html/new-beetle.htm new beetle 1.9 tdi]] [[http://flheddin.125mb.com/content/view/sony-tv.htm sony tv plasma 37]] [[http://benevolently.freehostia.com/content/view/wangan/ wangan]] [[http://flheddin.125mb.com/content/view/litfiba-pelu.htm litfiba pelu]] [[http://zoelverd.freeweb7.com/description/lib/glimpse/ glimpse]] [[http://www.freewebtown.com/boogiejames/topic/gianni-vattimo.htm gianni vattimo]] [[http://scaleslea.freewebpage.org/text/directory/lg-/ lg 8130 umts]] [[http://coarmago.t35.com/content/view/nec-cavi/ nec cavi vari]] [[http://mcwardlo.t35.com/library/html/vizietto/ vizietto]] [[http://lorcaxon.homeblock.com/data/yugioh-dawn/ yu-gi-oh dawn of destiny]] [[http://gawelzba.t35.com/library/html/metal-knight.htm metal knight]] [[http://coarmago.t35.com/content/view/lettore-mp/ lettore mp3 memory album 3 40gb]] [[http://zoelverd.freeweb7.com/description/lib/famosas-desnudas/ famosas desnudas deportistas]] [[http://zoelverd.freeweb7.com/description/lib/canzone-pagana/ canzone pagana]] [[http://oedi.freehostia.com/text/directory/salisburgo-ristorante/ salisburgo ristorante]] [[http://mauballe.125mb.com/web/seregno/ seregno]] [[http://www.freewebtown.com/boogiejames/topic/accessori-per.htm accessori per palmari asus 620]] [[http://www.freewebtown.com/prncessprncipe/library/html/ruby.htm ruby]] [[http://www.freewebtown.com/starbriteyellow/resources/articles/suncan-dan.htm suncan dan]] [[http://licohwar.homeblock.com/library/html/otra-ves/ otra ves]] [[http://failtoexpress.freehostia.com/html/verdi.htm verdi]] [[http://huruple.125mb.com/text/directory/commando/ commando 3]] [[http://www.freewebtown.com/prncessprncipe/library/html/senza-confini.htm senza confini eramo passavanti]] [[http://huruple.125mb.com/text/directory/tabella-diametri/ tabella diametri nominali]] [[http://www.freewebtown.com/boogiejames/topic/siemens-ac.htm siemens ac240]] [[http://benevolently.freehostia.com/content/view/diwaniya/ diwaniya]] [[http://selemku.t35.com/text/directory/penitenziario.htm penitenziario]] [[http://failtoexpress.freehostia.com/html/desiderando-giulia.htm desiderando giulia (dvd)]] [[http://greensticky.freehostia.com/library/html/chiara-noschese/ chiara noschese]] [[http://scaleslea.freewebpage.org/text/directory/calligrafia/ calligrafia]] [[http://beshennayabelka.freehostia.com/content/view/nilsson.htm nilsson]] [[http://grahrens.125mb.com/view/new/hasta-la/ hasta la victoria siempre]] [[http://coarmago.t35.com/content/view/mitsubishi-pajero/ mitsubishi pajero gls]] [[http://mauballe.125mb.com/web/batteria-nx/ batteria nx8220]] [[http://licohwar.homeblock.com/library/html/bach-musica/ bach musica d organo]] [[http://saline-joy.freehostia.com/web/ryan-airlines.htm ryan airlines]] [[http://boreldar.t35.com/text/directory/gil-de.htm gil de biedma, jaime]] [[http://benevolently.freehostia.com/content/view/tacy-sami/ tacy sami]] [[http://boreldar.t35.com/text/directory/herida-mortal.htm herida mortal]] [[http://lorcaxon.homeblock.com/data/inspire-gd/ inspire gd580 5 1]] [[http://greensticky.freehostia.com/library/html/il-ritorno/ il ritorno del padrino]] [[http://www.freewebtown.com/starbriteyellow/resources/articles/magical-kicks.htm magical kicks swf]] [[http://oedi.freehostia.com/text/directory/blog/ blog]] [[http://www.freewebtown.com/boogiejames/topic/aspirapolveri-ad.htm aspirapolveri ad acqua polti]] [[http://zoelverd.freeweb7.com/description/lib/volkswagen-golf/ volkswagen golf 2.8]] [[http://failtoexpress.freehostia.com/html/bin-arabama.htm bin arabama]] [[http://selemku.t35.com/text/directory/prestito-personali.htm prestito personali palermo]] [[http://zoelverd.freeweb7.com/description/lib/samsung-sr/ samsung sr l 679 evs]] [[http://zoelverd.freeweb7.com/description/lib/esame-per/ esame per la patente]] [[http://oedi.freehostia.com/text/directory/sony-/ sony 32 100 hz]] [[http://flheddin.125mb.com/content/view/digital-receiver.htm digital receiver]] [[http://getraylo.freeweb7.com/img/styles/router-com.htm router 3com wireless]] [[http://scaleslea.freewebpage.org/text/directory/audi-livorno/ audi livorno]] [[http://oedi.freehostia.com/text/directory/adidas-superstar/ adidas superstar uomo]] [[http://www.freewebtown.com/starbriteyellow/resources/articles/frutta-felpa.htm frutta felpa]] [[http://lorcaxon.homeblock.com/data/orologio-desktop/ orologio desktop]] [[http://huruple.125mb.com/text/directory/no-quiero/ no quiero saber]] [[http://mcwardlo.t35.com/library/html/honda-cbr/ honda cbr 600 f moto]] [[http://benevolently.freehostia.com/content/view/spedizione-italiana/ spedizione italiana everest]] [[http://selemku.t35.com/text/directory/euo.htm euo 2004]] [[http://oedi.freehostia.com/text/directory/fle-e/ fle e mutt]] [[http://selemku.t35.com/text/directory/festival-sanremo.htm festival sanremo 1973]] [[http://oedi.freehostia.com/text/directory/www-i/ www i box it]] [[http://oedi.freehostia.com/text/directory/calcio-mania/ calcio mania]] [[http://wainfan.t35.com/view/new/gola-calzature.htm gola calzature donna]] [[http://www.freewebtown.com/boogiejames/topic/eleven.htm eleven]] [[http://www.freewebtown.com/starbriteyellow/resources/articles/prima-di.htm prima di tutto]] [[http://getm0ney.freewebpage.org/lib/acer-aspire/ acer aspire 1682wlmi]] [[http://getraylo.freeweb7.com/img/styles/noi-non.htm noi non ci]] [[http://saline-joy.freehostia.com/web/david-backam.htm david backam]] [[http://lorcaxon.homeblock.com/data/casse-/ casse 7 1 creative]] [[http://boreldar.t35.com/text/directory/cd-blaukpunt.htm cd blaukpunt]] [[http://getm0ney.freewebpage.org/lib/trio-st/ trio st chicco]] [[http://mauballe.125mb.com/web/morire-a/ morire a ventanni]] [[http://lorcaxon.homeblock.com/data/michel-iett/ michel iett]] [[http://huruple.125mb.com/text/directory/ford-mondeo/ ford mondeo ghia]] [[http://getm0ney.freewebpage.org/lib/ballo-del/ ballo del chiamo]] [[http://scaleslea.freewebpage.org/text/directory/editing-video/ editing video]] [[http://coarmago.t35.com/content/view/lucrezia-borgia/ lucrezia borgia]] [[http://selemku.t35.com/text/directory/bon.htm bon]] [[http://kopapguw.homeblock.com/topic/tutti-i/ tutti i giochi di sport]] [[http://beshennayabelka.freehostia.com/content/view/polti-asse.htm polti asse stiro]] [[http://greensticky.freehostia.com/library/html/minghi-serenata/ minghi serenata]] [[http://licohwar.homeblock.com/library/html/dragoncam/ dragoncam]] [[http://grahrens.125mb.com/view/new/video-mara/ video mara venier]] [[http://flheddin.125mb.com/content/view/batteria-samsung.htm batteria samsung sgh p100]] [[http://gawelzba.t35.com/library/html/te-suelto.htm te suelto el pelo]] [[http://huruple.125mb.com/text/directory/ore/ ore]] [[http://getm0ney.freewebpage.org/lib/fornelli-d/ fornelli d italia rete 4]] [[http://www.freewebtown.com/starbriteyellow/resources/articles/fasciatoio-rimini.htm fasciatoio rimini]] [[http://benevolently.freehostia.com/content/view/directx/ directx]] [[http://huruple.125mb.com/text/directory/super-enalotto/ super enalotto 12]] [[http://licohwar.homeblock.com/library/html/impianti-hi/ impianti hi fi dvd]] [[http://www.freewebtown.com/boogiejames/topic/fasi-lunari.htm fasi lunari 2004]] [[http://beshennayabelka.freehostia.com/content/view/gioco-solitario.htm gioco solitario]] [[http://getm0ney.freewebpage.org/lib/free-games/ free games com]] [[http://failtoexpress.freehostia.com/html/skijump.htm ski-jump]] [[http://huruple.125mb.com/text/directory/la-casa/ la casa degli usher]] [[http://www.freewebtown.com/prncessprncipe/library/html/porsche-cabrio.htm porsche cabrio 996]] [[http://benevolently.freehostia.com/content/view/venere-lucente/ venere lucente]] [[http://selemku.t35.com/text/directory/kodak-fotocamere.htm kodak fotocamere digitali]] [[http://oedi.freehostia.com/text/directory/leccami/ leccami]] [[http://kopapguw.homeblock.com/topic/nathalie-cardoso/ nathalie cardoso]] [[http://gawelzba.t35.com/library/html/danzel.htm danzel]] [[http://coarmago.t35.com/content/view/scaffalature/ scaffalature]] [[http://coarmago.t35.com/content/view/twiddle-beats/ twiddle beats]] [[http://benevolently.freehostia.com/content/view/silicon-case/ silicon case s100]] [[http://beshennayabelka.freehostia.com/content/view/vacanza-vienna.htm vacanza vienna]] [[http://boreldar.t35.com/text/directory/sima-firenze.htm sima firenze]] [[http://saline-joy.freehostia.com/web/sony-davd.htm sony dav-d150]] [[http://boreldar.t35.com/text/directory/www-mns.htm www mns]] [[http://failtoexpress.freehostia.com/html/sena-tempo.htm sena tempo]] [[http://oedi.freehostia.com/text/directory/pan-jabi/ pan jabi]] [[http://huruple.125mb.com/text/directory/kit-veicolare/ kit veicolare nokia]] [[http://scaleslea.freewebpage.org/text/directory/bagno-fango/ bagno fango]] [[http://mauballe.125mb.com/web/arte-sonora/ arte sonora e visiva torino]] [[http://grahrens.125mb.com/view/new/ibiza-volo/ ibiza volo]] [[http://mauballe.125mb.com/web/sistema-operativo/ sistema operativo computadoras]] [[http://getraylo.freeweb7.com/img/styles/jane-fonda.htm jane fonda]] [[http://gawelzba.t35.com/library/html/iso-satellite.htm iso (satellite)]] [[http://oedi.freehostia.com/text/directory/y-sigo/ y sigo a ti paulina rubio]] [[http://flheddin.125mb.com/content/view/immagini-olimpiadi.htm immagini olimpiadi 2004]] [[http://licohwar.homeblock.com/library/html/vacanza-appartamento/ vacanza appartamento roma]] [[http://flheddin.125mb.com/content/view/powermust-ups.htm powermust ups 800 pro]] [[http://zoelverd.freeweb7.com/description/lib/scythe-ncu/ scythe ncu-2000]] [[http://licohwar.homeblock.com/library/html/samsung-vp/ samsung vp 110]] [[http://grahrens.125mb.com/view/new/gioco-con/ gioco con birilli]] [[http://zoelverd.freeweb7.com/description/lib/the-sims/ the sims ps2 videogiochi]] [[http://oedi.freehostia.com/text/directory/omosessuale/ omosessuale]] [[http://greensticky.freehostia.com/library/html/www-alongi/ www alongi it]] [[http://wainfan.t35.com/view/new/home-theatre.htm home theatre dvd lettore divx]] [[http://licohwar.homeblock.com/library/html/batteria-ibm/ batteria ibm thinkpad t20]] [[http://boreldar.t35.com/text/directory/festival-crociere.htm festival crociere]] [[http://failtoexpress.freehostia.com/html/the-best.htm the best of simple minds]] [[http://www.freewebtown.com/boogiejames/topic/dragonstea-din.htm dragonstea din tei o zon]] [[http://www.freewebtown.com/prncessprncipe/library/html/in-tutti.htm in tutti i miei giorni raf]] [[http://beshennayabelka.freehostia.com/content/view/www-hp.htm www hp com]] [[http://www.freewebtown.com/starbriteyellow/resources/articles/www-alicevip.htm www alicevip com]] [[http://selemku.t35.com/text/directory/cristallo-vetro.htm cristallo vetro altro arredamento]] [[http://oedi.freehostia.com/text/directory/revebebe/ revebebe]] [[http://huruple.125mb.com/text/directory/commando-zebra/ commando zebra]] [[http://boreldar.t35.com/text/directory/nino-scarico.htm nino scarico]] [[http://mcwardlo.t35.com/library/html/moon/ moon 5]] [[http://saline-joy.freehostia.com/web/maugeri.htm maugeri]] [[http://beshennayabelka.freehostia.com/content/view/distintivi-marina.htm distintivi marina militare]] [[http://boreldar.t35.com/text/directory/bischero.htm bischero]] [[http://getraylo.freeweb7.com/img/styles/congelatori-liebherr.htm congelatori liebherr]] [[http://mauballe.125mb.com/web/studio-immobiliare/ studio immobiliare brunelli]] [[http://selemku.t35.com/text/directory/ernia-del.htm ernia del disco in neurochirurgia]] [[http://mcwardlo.t35.com/library/html/disturbed-forsaken/ disturbed forsaken]] [[http://huruple.125mb.com/text/directory/riicerca/ riicerca]] [[http://www.freewebtown.com/starbriteyellow/resources/articles/mahj.htm mahj]] [[http://mauballe.125mb.com/web/pentium/ pentium 550]] [[http://flheddin.125mb.com/content/view/intel-prescott.htm intel prescott processori]] [[http://zoelverd.freeweb7.com/description/lib/wheda/ wheda]] [[http://benevolently.freehostia.com/content/view/siti-gratuiti/ siti gratuiti porno]] [[http://zoelverd.freeweb7.com/description/lib/aggiornamenti-cagliari/ aggiornamenti cagliari]] [[http://lorcaxon.homeblock.com/data/isola-dei/ isola dei famosi2]] [[http://lorcaxon.homeblock.com/data/orologio-vendita/ orologio vendita]] [[http://failtoexpress.freehostia.com/html/madoo-com.htm madoo com]] [[http://gawelzba.t35.com/library/html/giglio-infranto.htm giglio infranto]] [[http://failtoexpress.freehostia.com/html/preghiere-in.htm preghiere in latino]] [[http://benevolently.freehostia.com/content/view/la-manica/ la manica midi]] [[http://grahrens.125mb.com/view/new/hotel-livigno/ hotel livigno]] [[http://kopapguw.homeblock.com/topic/stampa-cd/ stampa cd rom]] [[http://beshennayabelka.freehostia.com/content/view/leona-johanson.htm leona johanson]] [[http://wainfan.t35.com/view/new/tavole-mistiche.htm tavole mistiche]] [[http://grahrens.125mb.com/view/new/www-globet/ www globet tv]] [[http://mcwardlo.t35.com/library/html/spirit-marte/ spirit marte]] [[http://getm0ney.freewebpage.org/lib/credem-mutuo/ credem mutuo]] [[http://mauballe.125mb.com/web/offerta-capo/ offerta capo verde]] [[http://getm0ney.freewebpage.org/lib/faxoutlook/ fax4outlook]] [[http://boreldar.t35.com/text/directory/romnesti.htm romnesti]] [[http://flheddin.125mb.com/content/view/i-midi.htm i midi de curtis]] [[http://mauballe.125mb.com/web/tariffe-parcheggio/ tariffe parcheggio]] [[http://oedi.freehostia.com/text/directory/crossfire-chrysler/ crossfire chrysler]] [[http://benevolently.freehostia.com/content/view/immagini-grand/ immagini grand theft auto san andreas]] [[http://grahrens.125mb.com/view/new/verme/ verme]] [[http://failtoexpress.freehostia.com/html/lettore-mp.htm lettore mp3 con radio e giochi]] [[http://saline-joy.freehostia.com/web/donne-inquiete.htm donne inquiete]] [[http://getm0ney.freewebpage.org/lib/bucetas/ bucetas]] [[http://selemku.t35.com/text/directory/old-woman.htm old woman sex]] [[http://kopapguw.homeblock.com/topic/insoliti/ insoliti]] [[http://flheddin.125mb.com/content/view/www-unifg.htm www unifg it]] [[http://mcwardlo.t35.com/library/html/gino-bramieri/ gino bramieri]] [[http://www.freewebtown.com/starbriteyellow/resources/articles/onitsuka-tiger.htm onitsuka tiger runspark]] [[http://kopapguw.homeblock.com/topic/inoki/ inoki]] [[http://flheddin.125mb.com/content/view/turn-me.htm turn me on dowland]] [[http://flheddin.125mb.com/content/view/baldoni-video.htm baldoni video]] [[http://getm0ney.freewebpage.org/lib/compatibile-lexmark/ compatibile lexmark]] [[http://getm0ney.freewebpage.org/lib/videos-de/ videos de floricienta y su banda]] [[http://getm0ney.freewebpage.org/lib/lettori-cd/ lettori cd aeron]] == Fast Charger ==
Pinout :
* 1   5 volts @ 1,250 ma
* 2 Short to pin 3
* 3 short to pin 2
* 4 440kohm pulldown
* 5 GND

== Just Power on the phone ==

Pinout :
* 1 + 5 volts
* 2 NC
* 3 NC
* 4 440kohm pulldown
* 5 GND

== Headset Mode ==

Pinout :
* 1 The phone suppiles a voltage to the headset through this pin
* 2 Left Out for Stereo Playback  or Mono Out  for handsfree 
* 3 Right Out for Stereo Playback or Mono In (mix for handsfree) 
* 4 102Kohm pulldown
* 5 GND

Depending on what you do (play mp3 / calling) the phone will either switch to stereo mode or handsfree mode.
The pins are either routed to the Stereo DAC of PCAP or to a Mono DAC and a Mono ACD in PCAP.

== Factory Test & Flash ==

There apears to be a way to force the phone to power-on even when there is NO battery present by applying an unknown voltage on pin 4. It is apparently used during manufacturing of the phones and might therefore be detected somehow by the bootloader. The only difference to USB accesory mode is that the phone powers on even without battery, and that the voltage on pin4 is different. Nothing is known about voltage / resistor to be used. On the other hand this is not an interesting mode anyway.

[[Category:Hardware]]
