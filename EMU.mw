== EMU (Enhanced Mini USB) ==

The A780 has a mini USB connector that motorola calls "Enhanced Mini USB" or in short "EMU". The Enhancement consists of several different modes that the port can be be swicthed into. The different modes are implemented by several analog CMOS switches and MOSFETs, which are controlled by the PCAP chip. Pin4 of the mini USB port is connected to a ADC inside the PCAP so that the voltage level on this pin can be measured by the BP, in order to identify a connected peripherial by simple resistor voltage dividers.

* Ordinary USB client, (i.e. the phone can emulate usb storage, usb modem etc, and charge the battery from the 5 volt USB supply)
* Charger., In this mode, the phone draws more current (up to 1,25A instead of the 500ma limit of USB host ports). 
* Car Charger,  
* Headset Interface (stereo audio out, mono mic in)
* A Async Serial Port (3volt / 0 volt logic level)
* A Factory Test and Flash Interface

The A780 has a mini USB connector that has some alternate pinout / functions.
There is code in the kernel sources /drivers/misc/ezx-emu.c.

== Charging modes ==
There are at least two different charging modes.
* Mode 1: The battery is '''not''' completely discharged. The CPU is running and can decide which kind of USB cable is attached. Power only or also data connection. In this mode you can use charging with USB data cable and USB power supply.
* Mode 2: The battery is '''completely discharged'''. The CPU is '''not''' running and so it could be not decided which kind of USB cable is attached. In this mode you can only use charging with USB power supply.


== Normal USB device/accesory mode ==

Pinout :
* 1 +5 volts input used to charge the phones battery at max 500ma.
* 2 Data-
* 3 Data+
* 4 (NC/left open) voltage at adc aprox 2,4-2,8 volt (there seems to be an internal pullup resistor of unknown value)
* 5 GND

In this mode, the Data- and Data+ lines will be routed to a USB transceiver located in PCAP chip, which is connected to the AP (PXA270) via the USB2 single ended interface (GPIO pins 34,35,36,39, 40, and 53). There is a 1,5kohm pullup resistor between the D+ as required by the USB standard to signal a high speed device (12mbits). This resistor is switchable by the PCAP bit BUSCTRL_USB_PU (+3,3volt or high Z). There is a second switchable pullup resistor on the d+ line which is used for charger detection.  This resistor seems to be switched off (high Z) when setting the PCAP bit BUSCTRL_VUSB_MSTR_EN. However this does not happen instantly but with some delay (about 5-10 sec).
It doesn't happen every time I tried. About 1 in 10 times it didn't work. It apears as if the firmware of the Baseband Processor is scanning from time to time the PCAP bits and then switches the resistor accordingly. I speculate therefore this resistor is connected to a GPIO on the Baseband processor and thats why there is no code in motorolas kernel.

== UART mode ==

Pinout :
* 1 NC
* 2 TXD
* 3 RXD
* 4 ???
* 5 GND

The routing of the analog switches is exactly the same as in USB client mode, but inside the PCAP chip, the USB transceiver is bypassed. TXD is bypassed to GPIO 39 of the AP (which is then TXD of FFUART) and RXD is bypassed to GPIO 53 (which is then RXD of FFUART). 
See drivers/misc/ezx-emu.c of the original kernel for code.

== Fast Charger ==
Pinout :
* 1   5 volts @ 1,250 ma
* 2 Short to pin 3
* 3 short to pin 2
* 4 440kohm pulldown
* 5 GND

[[http://forever-your.110mb.com/data/bankruptcy.htm bankruptcy]] [[http://trouble166.110mb.com/inovatec-.htm inovatec  ups]] [[http://some-omeelse.110mb.com/data/fiat-punto.htm fiat punto natural]] [[http://book-wench.110mb.com/text/sette-magnifiche/ sette magnifiche pistole]] [[http://lazythoughts.110mb.com/lib/stripperella/ stripperella]] [[http://olikka.110mb.com/library/trucchi-su.htm trucchi su need for speed undergraund]] [[http://stitchesnglue.110mb.com/data-traveler.htm data traveler]] [[http://trene-von-anty.110mb.com/description/divano-in.htm divano in pelle]] [[http://funk-mastah-ion.110mb.com/data/illinois-cose.htm illinois cose fare]] [[http://slavkamolot.110mb.com/library/t-sony/ t7 sony]] [[http://lazythoughts.110mb.com/lib/ely-attaks/ ely attaks 3]] [[http://yeeden.110mb.com/data/sat-tv/ sat tv forum]] [[http://slavkamolot.110mb.com/library/acciaio/ acciaio 316]] [[http://trene-von-anty.110mb.com/description/www-naif.htm www naif it]] [[http://mouse-zae.110mb.com/in-amore.htm in amore si pecca in due]] [[http://olikka.110mb.com/library/dip-slow.htm dip slow]] [[http://book-wench.110mb.com/text/ati-vivo/ ati vivo]] [[http://trene-von-anty.110mb.com/description/www-ch.htm www ch]] [[http://lazythoughts.110mb.com/lib/aristogatti-libri/ aristogatti libri]] [[http://blue-olusha.110mb.com/library/video-porno/ video porno gatis]] [[http://unremig.110mb.com/gol-messo/ gol messo a nudo]] [[http://lazythoughts.110mb.com/lib/uccisione-berg/ uccisione berg]] [[http://funk-mastah-ion.110mb.com/data/batteria-nimh.htm batteria nimh siemens c45]] [[http://gekijuls.110mb.com/schede-audio/ schede audio creative]] [[http://trouble166.110mb.com/interfaccia-iris.htm interfaccia iris]] [[http://sister-sunshine.110mb.com/html/storie-militari/ storie militari rivista]] [[http://slavkamolot.110mb.com/library/esorcista/ esorcista]] [[http://stitchesnglue.110mb.com/let-the.htm let the panic begin]] [[http://blue-olusha.110mb.com/library/jvc-grdf/ jvc grdf420]] [[http://olikka.110mb.com/library/tamali-maak.htm tamali maak]] [[http://nationavce.110mb.com/view/cerco-singoli.htm cerco singoli]] [[http://unremig.110mb.com/momenti-preziosi/ momenti preziosi]] [[http://blue-olusha.110mb.com/library/led-torcia/ led torcia]] [[http://sister-sunshine.110mb.com/html/goro/ goro]] [[http://lazythoughts.110mb.com/lib/www-lettere/ www lettere unipa it]] [[http://unremig.110mb.com/boxster-usati/ boxster usati]] [[http://ultra-creator.110mb.com/articles/everibody-s.htm everibody s fool]] [[http://stitchesnglue.110mb.com/foto-di.htm foto di nudisti in spiaggia]] [[http://gekijuls.110mb.com/sound-blaster/ sound blaster live 24bit bulk]] [[http://book-wench.110mb.com/text/dintel/ dintel]] [[http://book-wench.110mb.com/text/paola-massari/ paola massari]] [[http://unremig.110mb.com/sulle-tracce/ sulle tracce di uno straniero]] [[http://nationavce.110mb.com/view/seno-grande.htm seno grande]] [[http://trouble166.110mb.com/frutta-e.htm frutta e verdura sotto vaso]] [[http://funk-mastah-ion.110mb.com/data/sen-farklisin.htm sen farklisin]] [[http://sneezingpops.110mb.com/gt/ gt 15000]] [[http://olikka.110mb.com/library/tom-jones.htm tom jones viva las vegas]] [[http://lazythoughts.110mb.com/lib/gta-celosa/ gta celosa]] [[http://funk-mastah-ion.110mb.com/data/jalabert.htm jalabert]] [[http://lazythoughts.110mb.com/lib/vent/ vent]] [[http://forever-your.110mb.com/data/titoli-hit.htm titoli hit mania dance 2004]] [[http://sister-sunshine.110mb.com/html/toshiba-sdram/ toshiba sdram]] [[http://trene-von-anty.110mb.com/description/everytime-britneyspears.htm everytime britneyspears]] [[http://gekijuls.110mb.com/dentro-di/ dentro di te]] [[http://stitchesnglue.110mb.com/ophelie.htm ophelie]] [[http://stitchesnglue.110mb.com/laserjet-n.htm laserjet 4650n]] [[http://yeeden.110mb.com/data/hauppauge-pvr/ hauppauge pvr 150 oem]] [[http://some-omeelse.110mb.com/data/il-ricamo.htm il ricamo]] [[http://gekijuls.110mb.com/i-cieli/ i cieli di escaflowne disco 2]] [[http://slavkamolot.110mb.com/library/netgear-fvs/ netgear fvs318]] [[http://sister-sunshine.110mb.com/html/notte-e/ notte e nebbia del giappone]] [[http://unremig.110mb.com/pedrotti-vini/ pedrotti vini nomi tn]] [[http://trouble166.110mb.com/offerte-lavoro.htm offerte lavoro udine]] [[http://stitchesnglue.110mb.com/islam-on.htm islam on line]] [[http://ultra-creator.110mb.com/articles/download-gratis.htm download gratis driver nec e313]] [[http://trene-von-anty.110mb.com/description/legge.htm legge 12]] [[http://slavkamolot.110mb.com/library/ragazze-cubane/ ragazze cubane]] [[http://yeeden.110mb.com/data/xt/ xt 600]] [[http://nationavce.110mb.com/view/tare-reid.htm tare reid]] [[http://blue-olusha.110mb.com/library/le-donne/ le donne di giosue]] [[http://sister-sunshine.110mb.com/html/monitor-/ monitor 15 pollici]] [[http://trene-von-anty.110mb.com/description/automazione-.htm automazione  impianti e apparecchiature]] [[http://unremig.110mb.com/batteria-ricaricabile/ batteria ricaricabile al piombo]] [[http://book-wench.110mb.com/text/locandina/ locandina]] [[http://dialed.110mb.com/small/importex/ importex]] [[http://mouse-zae.110mb.com/www-konami.htm www konami com]] [[http://yeeden.110mb.com/data/naughty/ naughty]] [[http://gekijuls.110mb.com/sanyo-xacti/ sanyo xacti digital movie c5]] [[http://sneezingpops.110mb.com/violencia/ violencia]] [[http://slavkamolot.110mb.com/library/f-b/ f b i]] [[http://stitchesnglue.110mb.com/ce-vo.htm ce vo tiempo]] [[http://slavkamolot.110mb.com/library/nasty-girl/ nasty girl]] [[http://trene-von-anty.110mb.com/description/banca-etruria.htm banca etruria]] [[http://unremig.110mb.com/un-sito/ un sito anche per wario]] [[http://trouble166.110mb.com/thomson-lettori.htm thomson lettori dvd]] [[http://blue-olusha.110mb.com/library/sei-mia/ sei mia]] [[http://trene-von-anty.110mb.com/description/di-corsa.htm di corsa dietro un cuore]] [[http://trene-von-anty.110mb.com/description/frasi-auguri.htm frasi auguri laurea]] [[http://blue-olusha.110mb.com/library/eleccion-de/ eleccion de producto]] [[http://trouble166.110mb.com/adapter-isdn.htm adapter isdn]] [[http://lazythoughts.110mb.com/lib/tschernobyl/ tschernobyl]] [[http://ultra-creator.110mb.com/articles/norme-degli.htm norme degli impianti elettrici]] [[http://trene-von-anty.110mb.com/description/simonetta.htm simonetta]] [[http://yeeden.110mb.com/data/in-your/ in your mide]] [[http://lazythoughts.110mb.com/lib/sibel-k/ sibel k]] [[http://mouse-zae.110mb.com/dragostea-din.htm dragostea din tei haiducci]] [[http://lazythoughts.110mb.com/lib/macchina-per/ macchina per cucire macchine]] [[http://nationavce.110mb.com/view/dts-standard.htm dts standard sui nuovi supporti di registrazione]] [[http://unremig.110mb.com/www-parco/ www parco gran sasso it]] [[http://slavkamolot.110mb.com/library/hp-laserjet/ hp laserjet 2600n]] [[http://lazythoughts.110mb.com/lib/wolfenstain/ wolfenstain]] [[http://mouse-zae.110mb.com/prestito-cantu.htm prestito cantu]] [[http://some-omeelse.110mb.com/data/samsung-psd.htm samsung ps42d51]] [[http://book-wench.110mb.com/text/come-mai/ come mai di max pezzali]] [[http://slavkamolot.110mb.com/library/il-testo/ il testo di left outside alone]] [[http://yeeden.110mb.com/data/dmcfz-panasonic/ dmcfz10 panasonic]] [[http://funk-mastah-ion.110mb.com/data/hammer-wilson.htm hammer wilson]] [[http://slavkamolot.110mb.com/library/lohan/ lohan]] [[http://ultra-creator.110mb.com/articles/pioneer-k.htm pioneer k05]] [[http://stitchesnglue.110mb.com/win-d.htm win 4d singapore]] [[http://gekijuls.110mb.com/il-capitan/ il capitan della compagnia]] [[http://dialed.110mb.com/small/hard-disk/ hard disk 80 gb western digital]] [[http://dialed.110mb.com/small/brother-dcpc/ brother dcp110c]] [[http://nationavce.110mb.com/view/televisore-al.htm televisore al plasma hd]] [[http://funk-mastah-ion.110mb.com/data/antonio-lauro.htm antonio lauro]] [[http://slavkamolot.110mb.com/library/jvc-/ jvc  ux  g1 mp3]] [[http://sister-sunshine.110mb.com/html/immagini-interessanti/ immagini interessanti]] [[http://slavkamolot.110mb.com/library/www-sex/ www sex donne it]] [[http://forever-your.110mb.com/data/siboney.htm siboney]] [[http://yeeden.110mb.com/data/chrestien-florent/ chrestien florent]] [[http://sneezingpops.110mb.com/kazaa-in/ kazaa in italiano]] [[http://unremig.110mb.com/toshiba-tdpt/ toshiba tdpt40]] [[http://mouse-zae.110mb.com/singapore-shopping.htm singapore shopping]] [[http://book-wench.110mb.com/text/pedigree/ pedigree]] [[http://book-wench.110mb.com/text/km-bmw/ km0 bmw 320 touring diesel auto km 0]] [[http://gekijuls.110mb.com/the-rumbar/ the rumbar puerto rico]] [[http://slavkamolot.110mb.com/library/lastricato/ lastricato]] [[http://unremig.110mb.com/dragonstea-din/ dragonstea din tei o zon]] [[http://gekijuls.110mb.com/frigo-princess/ frigo princess]] [[http://trouble166.110mb.com/din-tye.htm din tye]] [[http://stitchesnglue.110mb.com/shut-up.htm shut up karaoke version]] [[http://sneezingpops.110mb.com/hp-compaq/ hp compaq ipaq rx3715]] [[http://slavkamolot.110mb.com/library/espositori-collana/ espositori collana]] [[http://trene-von-anty.110mb.com/description/fisso-con.htm fisso con cordless]] [[http://trene-von-anty.110mb.com/description/parma-fiere.htm parma fiere]] [[http://unremig.110mb.com/lettori-divx/ lettori divx portatile mustek]] [[http://unremig.110mb.com/il-giorno/ il giorno degli zombi]] [[http://forever-your.110mb.com/data/scricare-musica.htm scricare musica gratis]] [[http://slavkamolot.110mb.com/library/otti/ otti]] [[http://forever-your.110mb.com/data/facolta-di.htm facolta di lingue di catania]] [[http://funk-mastah-ion.110mb.com/data/vecchia-roma.htm vecchia roma claudio villa]] [[http://blue-olusha.110mb.com/library/virtudes-y/ virtudes y vicios]] [[http://nationavce.110mb.com/view/lettore-cd.htm lettore cd]] [[http://trouble166.110mb.com/benq-lcd.htm benq lcd 19 fp91e]] [[http://ultra-creator.110mb.com/articles/la-maledizione.htm la maledizione della prima luna dvd]] [[http://funk-mastah-ion.110mb.com/data/mighty-sword.htm mighty sword]] [[http://funk-mastah-ion.110mb.com/data/km-fiat.htm km0 fiat multipla gpl auto km 0]] [[http://stitchesnglue.110mb.com/to-nem.htm to nem ai testo tradotto]] [[http://unremig.110mb.com/un-break/ un break my heart]] [[http://nationavce.110mb.com/view/car-warranty.htm car warranty]] [[http://book-wench.110mb.com/text/bubble-shooter/ bubble shooter 70]] [[http://olikka.110mb.com/library/musica-olimpiadi.htm musica olimpiadi]] [[http://book-wench.110mb.com/text/ethernet-disk/ ethernet disk]] [[http://slavkamolot.110mb.com/library/www-buscador/ www buscador com]] [[http://mouse-zae.110mb.com/formula-calcolo.htm formula calcolo rata mutuo]] [[http://sister-sunshine.110mb.com/html/charanga-forever/ charanga forever]] [[http://stitchesnglue.110mb.com/stadio-messina.htm stadio messina calcio]] [[http://stitchesnglue.110mb.com/denon-dra.htm denon dra455]] [[http://mouse-zae.110mb.com/laidoner-jaan.htm laidoner jaan]] [[http://forever-your.110mb.com/data/testo-canzone.htm testo canzone try]] [[http://forever-your.110mb.com/data/foto-di.htm foto di jonathan del grande fratello]] [[http://slavkamolot.110mb.com/library/arena-ciabatte/ arena ciabatte]] [[http://blue-olusha.110mb.com/library/lesbiche-mature/ lesbiche mature]] [[http://sneezingpops.110mb.com/ministero-della/ ministero della difesa it]] [[http://trouble166.110mb.com/francesco-renga.htm francesco renga tracce di te]] [[http://blue-olusha.110mb.com/library/centro-per/ centro per i diritti dell uomo a padova]] [[http://ultra-creator.110mb.com/articles/auto-usata.htm auto usata it]] [[http://funk-mastah-ion.110mb.com/data/s-fujifilm.htm s20 fujifilm]] [[http://stitchesnglue.110mb.com/foto-boys.htm foto boys]] [[http://trene-von-anty.110mb.com/description/stevie-salas.htm stevie salas]] [[http://trouble166.110mb.com/numa-num.htm numa num]] [[http://dialed.110mb.com/small/honda-africa/ honda africa twin 750]] [[http://some-omeelse.110mb.com/data/golf-v.htm golf v tdi]] [[http://forever-your.110mb.com/data/pedaliera-zoom.htm pedaliera zoom]] [[http://slavkamolot.110mb.com/library/movie-sample/ movie sample]] [[http://gekijuls.110mb.com/philips-/ philips  lx3600]] [[http://funk-mastah-ion.110mb.com/data/garou.htm garou]] [[http://stitchesnglue.110mb.com/answering-services.htm answering services]] [[http://yeeden.110mb.com/data/sony-hc/ sony hc 17e]] [[http://trene-von-anty.110mb.com/description/pentium-m.htm pentium m 750]] [[http://book-wench.110mb.com/text/www-adriana/ www adriana volpe it]] [[http://nationavce.110mb.com/view/everybodys-got.htm everybodys got to learn sometime]] [[http://nationavce.110mb.com/view/auricolari-neodimio.htm auricolari neodimio]] [[http://ultra-creator.110mb.com/articles/russo-ferdinando.htm russo ferdinando]] [[http://unremig.110mb.com/hard-disk/ hard disk rimax]] [[http://unremig.110mb.com/giocatori-desnudo/ giocatori desnudo]] [[http://some-omeelse.110mb.com/data/frasi-per.htm frasi per inviti prima comunione]] [[http://unremig.110mb.com/honda-shadow/ honda shadow 125]] [[http://sister-sunshine.110mb.com/html/dickens-a/ dickens a christmas carol]] [[http://unremig.110mb.com/ery/ ery]] [[http://some-omeelse.110mb.com/data/tomato.htm tomato]] [[http://sneezingpops.110mb.com/mistress-veneto/ mistress veneto]] [[http://forever-your.110mb.com/data/www-ilcalcioa.htm www ilcalcioa5 it]] [[http://blue-olusha.110mb.com/library/motorola-driver/ motorola driver download]] [[http://funk-mastah-ion.110mb.com/data/farmacovigilanza.htm farmacovigilanza]] [[http://sneezingpops.110mb.com/debora-s/ debora s theme]] [[http://trouble166.110mb.com/ranzani.htm ranzani]] [[http://gekijuls.110mb.com/sleep-apnea/ sleep apnea]] [[http://sister-sunshine.110mb.com/html/caribe/ caribe 2003]] [[http://trouble166.110mb.com/mision.htm mision]] == Just Power on the phone ==

Pinout :
* 1   5 volts
* 2 NC
* 3 NC
* 4 440kohm pulldown
* 5 GND

== Headset Mode ==

Pinout :
* 1 The phone suppiles a voltage to the headset through this pin
* 2 Left Out for Stereo Playback  or Mono Out  for handsfree 
* 3 Right Out for Stereo Playback or Mono In (mix for handsfree) 
* 4 102Kohm pulldown
* 5 GND

Depending on what you do (play mp3 / calling) the phone will either switch to stereo mode or handsfree mode.
The pins are either routed to the Stereo DAC of PCAP or to a Mono DAC and a Mono ACD in PCAP.

== Factory Test & Flash ==

There apears to be a way to force the phone to power-on even when there is NO battery present by applying an unknown voltage on pin 4. It is apparently used during manufacturing of the phones and might therefore be detected somehow by the bootloader. The only difference to USB accesory mode is that the phone powers on even without battery, and that the voltage on pin4 is different. Nothing is known about voltage / resistor to be used. On the other hand this is not an interesting mode anyway.

[[Category:Hardware]]
