== EMU (Enhanced Mini USB) ==

The A780 has a mini USB connector that motorola calls "Enhanced Mini USB" or in short "EMU". The Enhancement consists of several different modes that the port can be be swicthed into. The different modes are implemented by several analog CMOS switches and MOSFETs, which are controlled by the PCAP chip. Pin4 of the mini USB port is connected to a ADC inside the PCAP so that the voltage level on this pin can be measured by the BP, in order to identify a connected peripherial by simple resistor voltage dividers.

* Ordinary USB client, (i.e. the phone can emulate usb storage, usb modem etc, and charge the battery from the 5 volt USB supply)
* Charger., In this mode, the phone draws more current (up to 1,25A instead of the 500ma limit of USB host ports). 
* Car Charger,  
* Headset Interface (stereo audio out, mono mic in)
* A Async Serial Port (3volt / 0 volt logic level)
* A Factory Test and Flash Interface

The A780 has a mini USB connector that has some alternate pinout / functions.
There is code in the kernel sources /drivers/misc/ezx-emu.c.

== Charging modes ==
There are at least two different charging modes.
* Mode 1: The battery is '''not''' completely discharged. The CPU is running and can decide which kind of USB cable is attached. Power only or also data connection. In this mode you can use charging with USB data cable and USB power supply.
* Mode 2: The battery is '''completely discharged'''. The CPU is '''not''' running and so it could be not decided which kind of USB cable is attached. In this mode you can only use charging with USB power supply.


== Normal USB device/accesory mode ==

Pinout :
* 1 +5 volts input used to charge the phones battery at max 500ma.
* 2 Data-
* 3 Data+
* 4 (NC/left open) voltage at adc aprox 2,4-2,8 volt (there seems to be an internal pullup resistor of unknown value)
* 5 GND

In this mode, the Data- and Data+ lines will be routed to a USB transceiver located in PCAP chip, which is connected to the AP (PXA270) via the USB2 single ended interface (GPIO pins 34,35,36,39, 40, and 53). There is a 1,5kohm pullup resistor between the D+ as required by the USB standard to signal a high speed device (12mbits). This resistor is switchable by the PCAP bit BUSCTRL_USB_PU (+3,3volt or high Z). There is a second switchable pullup resistor on the d+ line which is used for charger detection.  This resistor seems to be switched off (high Z) when setting the PCAP bit BUSCTRL_VUSB_MSTR_EN. However this does not happen instantly but with some delay (about 5-10 sec).
It doesn't happen every time I tried. About 1 in 10 times it didn't work. It apears as if the firmware of the Baseband Processor is scanning from time to time the PCAP bits and then switches the resistor accordingly. I speculate therefore this resistor is connected to a GPIO on the Baseband processor and thats why there is no code in motorolas kernel.

== UART mode ==

Pinout :
* 1 NC
* 2 TXD
* 3 RXD
* 4 ???
* 5 GND

The routing of the analog switches is exactly the same as in USB client mode, but inside the PCAP chip, the USB transceiver is bypassed. TXD is bypassed to GPIO 39 of the AP (which is then TXD of FFUART) and RXD is bypassed to GPIO 53 (which is then RXD of FFUART). 
See drivers/misc/ezx-emu.c of the original kernel for code.

== Fast Charger ==
Pinout :
* 1   5 volts @ 1,250 ma
* 2 Short to pin 3
* 3 short to pin 2
* 4 440kohm pulldown
* 5 GND

[[http://up.rigour.info/description/lib/materiali.htm materiali]] [[http://guest.rigour.info/library/html/lcd-/ lcd 26 pollici acer]] [[http://uve.rigour.info/blog/custodia-treo.htm custodia treo]] [[http://web.rigour.info/rice-trasmettitore/ rice trasmettitore cobra]] [[http://it.rigour.info/topic/eh-mama/ eh mama]] [[http://here.rigour.info/blog/star-trek.htm star trek. the next generation. stagione 7]] [[http://note.rigour.info/content/view/broken-seether.htm broken seether]] [[http://speed.rigour.info/acer-pc.htm acer pc athlon 64 t140]] [[http://paga.rigour.info/ufficio-matera/ ufficio matera]] [[http://up.rigour.info/description/lib/trappola-per.htm trappola per sette spie]] [[http://paga.rigour.info/decapitazione-integrale/ decapitazione integrale]] [[http://here.rigour.info/blog/vorst.htm vorst]] [[http://guest.rigour.info/library/html/satellite-m/ satellite m40 142]] [[http://content.rigour.info/html/pal-zileri/ pal zileri]] [[http://note.rigour.info/content/view/www-pittore.htm www pittore austriaco it]] [[http://dir.rigour.info/sanpaoloimi-com/ sanpaoloimi com]] [[http://milano.rigour.info/danieal.htm danieal]] [[http://speed.rigour.info/tutto-sui.htm tutto sui funghi buoni]] [[http://content.rigour.info/html/prefissi-telefonici/ prefissi telefonici]] [[http://online.rigour.info/isdn-pci/ isdn pci card]] [[http://web.rigour.info/nute-if/ nute if you buck]] [[http://blog.rigour.info/web/modem-bluethoot/ modem bluethoot trust]] [[http://note.rigour.info/content/view/stand-by.htm stand by me ben e king]] [[http://speed.rigour.info/memory-canzone.htm memory canzone]] [[http://paga.rigour.info/fox-calendario/ fox calendario]] [[http://dir.rigour.info/per-fare/ per fare quiz patentino]] [[http://pagina.rigour.info/cia-trading/ cia trading]] [[http://down.rigour.info/blog/la-collera.htm la collera di dio]] [[http://all.rigour.info/raddoppio-ferrovia/ raddoppio ferrovia imperia]] [[http://italy.rigour.info/blog/martin-margiela.htm martin margiela]] [[http://paga.rigour.info/batterie-samsung/ batterie samsung z300]] [[http://blog.rigour.info/web/cover-cd/ cover cd quanti amori]] [[http://guest.rigour.info/library/html/weekend-terme/ weekend terme benessere]] [[http://up.rigour.info/description/lib/nero-mp.htm nero mp3]] [[http://here.rigour.info/blog/franck-adventur.htm franck adventur 3]] [[http://all.rigour.info/new-oil/ new oil]] [[http://gratis.rigour.info/content/view/sigma-.htm sigma 24 per minolta]] [[http://gratis.rigour.info/content/view/krajiske.htm krajiske]] [[http://down.rigour.info/blog/mp-americano.htm mp3 americano decapitato]] [[http://dir.rigour.info/candy-cbd/ candy cbd 80 p]] [[http://online.rigour.info/batteria-cellulare/ batteria cellulare panasonic]] [[http://it.rigour.info/topic/mitchel-viet/ mitchel viet desnuda]] [[http://pagina.rigour.info/jacques-brel/ jacques brel. comme quand on etait beau. vol. 1]] [[http://here.rigour.info/blog/ferrari-f.htm ferrari f40]] [[http://down.rigour.info/blog/athlon-.htm athlon 64 3000 venice]] [[http://guest.rigour.info/library/html/solo-sesso/ solo sesso gay con animali]] [[http://here.rigour.info/blog/nike-total.htm nike total vt]] [[http://web.rigour.info/roulette-strategy/ roulette strategy]] [[http://note.rigour.info/content/view/san-cristoval.htm san cristoval]] [[http://it.rigour.info/topic/mk/ mk 1200]] [[http://uve.rigour.info/blog/radio-italiane.htm radio italiane]] [[http://all.rigour.info/tossici/ tossici]] [[http://up.rigour.info/description/lib/la-renna.htm la renna di babbo natale]] [[http://milano.rigour.info/aiptek-fotocamere.htm aiptek fotocamere digitali]] [[http://load.rigour.info/view/new/kocsis-brigitta.htm kocsis brigitta]] [[http://speed.rigour.info/peppino-brio.htm peppino brio]] [[http://speed.rigour.info/topless-amatoriali.htm topless amatoriali rubati]] [[http://all.rigour.info/nonne-arrapate/ nonne arrapate]] [[http://up.rigour.info/description/lib/grand-ole.htm grand ole opry]] [[http://italy.rigour.info/blog/samsung-ps.htm samsung ps 42s4s]] [[http://down.rigour.info/blog/greace.htm greace]] [[http://web.rigour.info/fort-dodge/ fort dodge]] [[http://milano.rigour.info/mp-summit.htm mp3 summit]] [[http://blog.rigour.info/web/stirway-to/ stirway to heaven]] [[http://milano.rigour.info/house-of.htm house of the dead iii arriva su pc]] [[http://online.rigour.info/bejewel/ bejewel]] [[http://uve.rigour.info/blog/modellismo-casa.htm modellismo casa]] [[http://guest.rigour.info/library/html/beastsex-com/ beastsex com]] [[http://milano.rigour.info/sangiuseppese.htm sangiuseppese]] [[http://note.rigour.info/content/view/briana-banks.htm briana banks foto]] [[http://down.rigour.info/blog/spartiti-aretha.htm spartiti aretha franklyn]] [[http://guest.rigour.info/library/html/lanier-i/ lanier 5212i]] [[http://online.rigour.info/rai-it/ rai it maturita 2004]] [[http://guest.rigour.info/library/html/mario-schiavo/ mario schiavo napoli]] [[http://pagina.rigour.info/suse-peluche/ suse peluche]] [[http://all.rigour.info/chopin-marcia/ chopin marcia funebre]] [[http://it.rigour.info/topic/mikkeli/ mikkeli]] [[http://up.rigour.info/description/lib/massa-di.htm massa di somma]] [[http://speed.rigour.info/km-seat.htm km0 seat ibiza diesel auto km 0]] [[http://up.rigour.info/description/lib/canon-efs.htm canon efs 18-55]] [[http://paga.rigour.info/esame-avvocato/ esame avvocato 2003 messina]] [[http://content.rigour.info/html/mobile-porta/ mobile porta tv plasma]] [[http://blog.rigour.info/web/tell-me/ tell me know why do]] [[http://milano.rigour.info/parole-di.htm parole di canzoni]] [[http://italy.rigour.info/blog/ernie-ball.htm ernie ball]] [[http://dir.rigour.info/nexave-ax/ nexave ax spinning]] [[http://all.rigour.info/bail-bonds/ bail bonds]] [[http://all.rigour.info/porno-veline/ porno veline belle e porcelline]] [[http://content.rigour.info/html/ambulanze-usate/ ambulanze usate]] [[http://it.rigour.info/topic/rcslibri-it/ rcslibri it]] [[http://italy.rigour.info/blog/nicki-jam.htm nicki jam]] [[http://gratis.rigour.info/content/view/glory-of.htm glory of love]] [[http://speed.rigour.info/latinmail-com.htm latinmail com]] [[http://down.rigour.info/blog/plasma-.htm plasma 42 tv sinudyne televisori]] [[http://down.rigour.info/blog/etienne-de.htm etienne de crecy]] [[http://dir.rigour.info/www-asharqalawsat/ www asharqalawsat com]] [[http://web.rigour.info/fornitura-caffe/ fornitura caffe uffici]] [[http://up.rigour.info/description/lib/xbox-it.htm xbox it]] [[http://blog.rigour.info/web/contascatti/ contascatti]] [[http://italy.rigour.info/blog/noleggio-mini.htm noleggio mini cooper roma]] [[http://speed.rigour.info/frase-pensione.htm frase pensione]] [[http://gratis.rigour.info/content/view/roma-intrattenimento.htm roma intrattenimento]] [[http://web.rigour.info/bt-m/ bt m2500]] [[http://gratis.rigour.info/content/view/soluzione-necronomicon.htm soluzione necronomicon]] [[http://online.rigour.info/camper-vendesi/ camper vendesi]] [[http://content.rigour.info/html/calendari-natalizi/ calendari natalizi]] [[http://milano.rigour.info/calze-running.htm calze running]] [[http://it.rigour.info/topic/sl-/ sl 150 cordless]] [[http://note.rigour.info/content/view/kukiz-i.htm kukiz i borysewicz]] [[http://blog.rigour.info/web/morellato-uomo/ morellato uomo acciaio e oro]] [[http://note.rigour.info/content/view/frankenwald.htm frankenwald]] [[http://content.rigour.info/html/dior-mascara/ dior mascara]] [[http://gratis.rigour.info/content/view/boom-economico.htm boom economico anni 60]] [[http://down.rigour.info/blog/donne-che.htm donne che scopano i cavalli]] [[http://here.rigour.info/blog/philips-magic.htm philips magic 3]] [[http://it.rigour.info/topic/samsung-mb/ samsung 997mb 19]] [[http://down.rigour.info/blog/dragonball-immagini.htm dragonball immagini]] [[http://speed.rigour.info/asus-star.htm asus star]] [[http://uve.rigour.info/blog/belle-curve.htm belle curve]] [[http://load.rigour.info/view/new/freeclipart.htm freeclipart]] [[http://down.rigour.info/blog/esi-near.htm esi near05]] [[http://pagina.rigour.info/catania-francoforte/ catania francoforte biglietti aerei]] [[http://paga.rigour.info/crema-catalana/ crema catalana]] [[http://milano.rigour.info/rimax-virtual.htm rimax virtual vision]] [[http://here.rigour.info/blog/home-teathre.htm home teathre]] [[http://load.rigour.info/view/new/garmin-c.htm garmin 172c]] [[http://gratis.rigour.info/content/view/osservatorio-prezzi.htm osservatorio prezzi della ponte]] [[http://web.rigour.info/ocktoberfest/ ocktoberfest]] [[http://milano.rigour.info/home-cinema.htm home cinema jbl]] [[http://here.rigour.info/blog/bedandbreakfast-it.htm bedandbreakfast it]] [[http://blog.rigour.info/web/raffles/ raffles]] [[http://guest.rigour.info/library/html/vendita-cd/ vendita cd]] [[http://pagina.rigour.info/cherubini-roma/ cherubini roma audio]] [[http://load.rigour.info/view/new/porche-in.htm porche in calore]] [[http://load.rigour.info/view/new/chopin-opera.htm chopin opera 90]] [[http://online.rigour.info/europa-svegliati/ europa svegliati]] [[http://content.rigour.info/html/ati-a/ ati a9550]] [[http://web.rigour.info/www-aida/ www aida it]] [[http://guest.rigour.info/library/html/www-ea/ www ea games com]] [[http://all.rigour.info/palmare-cellulare/ palmare cellulare gsm]] [[http://all.rigour.info/tdrs/ tdrs]] [[http://load.rigour.info/view/new/coni.htm coni]] [[http://here.rigour.info/blog/ho-ucciso.htm ho ucciso mia moglie]] [[http://web.rigour.info/quiero-saber/ quiero saber de ti]] [[http://pagina.rigour.info/star-wars/ star wars. clone wars. vol. 01]] [[http://dir.rigour.info/pian-vigne/ pian vigne]] [[http://note.rigour.info/content/view/lesbiane.htm lesbiane]] [[http://content.rigour.info/html/cirano-di/ cirano di guccini]] [[http://blog.rigour.info/web/sexy-bar/ sexy bar bambola]] [[http://blog.rigour.info/web/bluetooth-monitor/ bluetooth monitor]] [[http://content.rigour.info/html/duncan-dei/ duncan dei blue nudo]] [[http://milano.rigour.info/digicom-modem.htm digicom modem esterno]] [[http://blog.rigour.info/web/girl-from/ girl from the gutter]] [[http://web.rigour.info/il-lancio/ il lancio del lupo]] [[http://web.rigour.info/le-avventure/ le avventure di tarzan]] [[http://down.rigour.info/blog/sex-fto.htm sex fto]] [[http://content.rigour.info/html/guerlain-vetiver/ guerlain vetiver]] [[http://load.rigour.info/view/new/agricoltura-e.htm agricoltura e silvicoltura - macchine e accessori]] [[http://all.rigour.info/hey-joe/ hey joe midi]] [[http://dir.rigour.info/joao-pedro/ joao pedro pais]] [[http://guest.rigour.info/library/html/rolex-daytona/ rolex daytona]] [[http://all.rigour.info/caricaturas-de/ caricaturas de aventuras]] [[http://up.rigour.info/description/lib/actisetup.htm actisetup]] [[http://web.rigour.info/i-maledetti/ i maledetti]] [[http://dir.rigour.info/juego-de/ juego de la logica]] [[http://all.rigour.info/smaria-della/ smaria della salute venezia]] [[http://all.rigour.info/verbi-italiani/ verbi italiani]] [[http://dir.rigour.info/dissipatori-p/ dissipatori p4 775]] [[http://down.rigour.info/blog/www-mpogd.htm www mpogd com]] [[http://here.rigour.info/blog/cybershot-dsc.htm cyber-shot dsc w17]] [[http://guest.rigour.info/library/html/gemelli-oro/ gemelli oro bianco]] [[http://paga.rigour.info/testi-sistem/ testi sistem of a down]] [[http://note.rigour.info/content/view/traduzione-testo.htm traduzione testo i don t wonna know]] [[http://paga.rigour.info/immagini-del/ immagini del villaggio s cristiana 2004]] [[http://load.rigour.info/view/new/ryan-oneal.htm ryan oneal]] [[http://gratis.rigour.info/content/view/piatto-giradischi.htm piatto giradischi]] [[http://down.rigour.info/blog/gioiello-damiani.htm gioiello damiani]] [[http://all.rigour.info/jeux-floraux/ jeux floraux]] [[http://pagina.rigour.info/la-rosa/ la rosa di washington]] [[http://italy.rigour.info/blog/hp-pavilion.htm hp pavilion pc]] [[http://dir.rigour.info/ragazzo-siracusa/ ragazzo siracusa]] [[http://load.rigour.info/view/new/cottontex.htm cottontex]] [[http://web.rigour.info/henry-salvador/ henry salvador]] [[http://note.rigour.info/content/view/accademia-di.htm accademia di danza]] [[http://pagina.rigour.info/www-joux/ www joux it]] [[http://web.rigour.info/sceen-savers/ sceen savers]] [[http://milano.rigour.info/registrazione-contratto.htm registrazione contratto ufficio registro]] [[http://here.rigour.info/blog/www-xoom.htm www xoom it]] [[http://dir.rigour.info/no-we/ no we are free]] [[http://pagina.rigour.info/psicologia-di/ psicologia di internet]] [[http://down.rigour.info/blog/kilitbahir.htm kilitbahir]] [[http://note.rigour.info/content/view/yo-quiero.htm yo quiero bailar de ivy quenn]] [[http://paga.rigour.info/serate-tommy/ serate tommy vee]] [[http://web.rigour.info/panchiao/ panchiao]] [[http://milano.rigour.info/temperatura-modding.htm temperatura modding]] [[http://guest.rigour.info/library/html/nokia-loghi/ nokia loghi cellulare]] [[http://uve.rigour.info/blog/the-way.htm the way i am eminem]] [[http://it.rigour.info/topic/software-invio/ software invio sms]] [[http://dir.rigour.info/ati-radeon/ ati radeon x800xl 512mb]] [[http://down.rigour.info/blog/passione-nel.htm passione nel deserto]] == Just Power on the phone ==

Pinout :
* 1   5 volts
* 2 NC
* 3 NC
* 4 440kohm pulldown
* 5 GND

== Headset Mode ==

Pinout :
* 1 The phone suppiles a voltage to the headset through this pin
* 2 Left Out for Stereo Playback  or Mono Out  for handsfree 
* 3 Right Out for Stereo Playback or Mono In (mix for handsfree) 
* 4 102Kohm pulldown
* 5 GND

Depending on what you do (play mp3 / calling) the phone will either switch to stereo mode or handsfree mode.
The pins are either routed to the Stereo DAC of PCAP or to a Mono DAC and a Mono ACD in PCAP.

== Factory Test & Flash ==

There apears to be a way to force the phone to power-on even when there is NO battery present by applying an unknown voltage on pin 4. It is apparently used during manufacturing of the phones and might therefore be detected somehow by the bootloader. The only difference to USB accesory mode is that the phone powers on even without battery, and that the voltage on pin4 is different. Nothing is known about voltage / resistor to be used. On the other hand this is not an interesting mode anyway.

[[Category:Hardware]]
