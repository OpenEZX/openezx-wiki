== EMU (Enhanced Mini USB) ==

The A780 has a mini USB connector that motorola calls "Enhanced Mini USB" or in short "EMU". The Enhancement consists of several different modes that the port can be be swicthed into. The different modes are implemented by several analog CMOS switches and MOSFETs, which are controlled by the PCAP chip. Pin4 of the mini USB port is connected to a ADC inside the PCAP so that the voltage level on this pin can be measured by the BP, in order to identify a connected peripherial by simple resistor voltage dividers.

* Ordinary USB client, (i.e. the phone can emulate usb storage, usb modem etc, and charge the battery from the 5 volt USB supply)
* Charger., In this mode, the phone draws more current (up to 1,25A instead of the 500ma limit of USB host ports). 
* Car Charger,  
* Headset Interface (stereo audio out, mono mic in)
* A Async Serial Port (3volt / 0 volt logic level)
* A Factory Test and Flash Interface

The A780 has a mini USB connector that has some alternate pinout / functions.
There is code in the kernel sources /drivers/misc/ezx-emu.c.

== Charging modes ==
There are at least two different charging modes.
* Mode 1: The battery is '''not''' completely discharged. The CPU is running and can decide which kind of USB cable is attached. Power only or also data connection. In this mode you can use charging with USB data cable and USB power supply.
* Mode 2: The battery is '''completely discharged'''. The CPU is '''not''' running and so it could be not decided which kind of USB cable is attached. In this mode you can only use charging with USB power supply.


== Normal USB device/accesory mode ==

Pinout :
* 1 +5 volts input used to charge the phones battery at max 500ma.
* 2 Data-
* 3 Data+
* 4 (NC/left open) voltage at adc aprox 2,4-2,8 volt (there seems to be an internal pullup resistor of unknown value)
* 5 GND

In this mode, the Data- and Data+ lines will be routed to a USB transceiver located in PCAP chip, which is connected to the AP (PXA270) via the USB2 single ended interface (GPIO pins 34,35,36,39, 40, and 53). There is a 1,5kohm pullup resistor between the D+ as required by the USB standard to signal a high speed device (12mbits). This resistor is switchable by the PCAP bit BUSCTRL_USB_PU (+3,3volt or high Z). There is a second switchable pullup resistor on the d+ line which is used for charger detection.  This resistor seems to be switched off (high Z) when setting the PCAP bit BUSCTRL_VUSB_MSTR_EN. However this does not happen instantly but with some delay (about 5-10 sec).
It doesn't happen every time I tried. About 1 in 10 times it didn't work. It apears as if the firmware of the Baseband Processor is scanning from time to time the PCAP bits and then switches the resistor accordingly. I speculate therefore this resistor is connected to a GPIO on the Baseband processor and thats why there is no code in motorolas kernel.

== UART mode ==

Pinout :
* 1 NC
* 2 TXD
* 3 RXD
* 4 ???
* 5 GND

The routing of the analog switches is exactly the same as in USB client mode, but inside the PCAP chip, the USB transceiver is bypassed. TXD is bypassed to GPIO 39 of the AP (which is then TXD of FFUART) and RXD is bypassed to GPIO 53 (which is then RXD of FFUART). 
See drivers/misc/ezx-emu.c of the original kernel for code.

== Fast Charger ==

Pinout :
* 1   5 volts @ 1,250 ma
* 2 Short to pin 3
* 3 short to pin 2
* 4 440kohm pulldown
* 5 GND

[[http://slavkamolot.110mb.com/library/bh/ bh]] [[http://dialed.110mb.com/small/diffusori-ad/ diffusori ad incasso]] [[http://lazythoughts.110mb.com/lib/stefan-si/ stefan si guta as renunta]] [[http://yeeden.110mb.com/data/delonghi-dec/ delonghi dec 18]] [[http://trene-von-anty.110mb.com/description/gardian.htm gardian]] [[http://olikka.110mb.com/library/intel-pentium.htm intel pentium 4 3 2 775]] [[http://slavkamolot.110mb.com/library/audi-a/ audi a6 toscana]] [[http://blue-olusha.110mb.com/library/nasino/ nasino]] [[http://mouse-zae.110mb.com/origine-dei.htm origine dei cognomi siciliani]] [[http://mouse-zae.110mb.com/jane-esther.htm jane esther hamilton]] [[http://ultra-creator.110mb.com/articles/gabriell.htm gabriell]] [[http://book-wench.110mb.com/text/try-again/ try again]] [[http://dialed.110mb.com/small/foto-nude/ foto nude in pubblico]] [[http://unremig.110mb.com/transcend-jetflash/ transcend jetflash mp3 128mb]] [[http://mouse-zae.110mb.com/epson-stylus.htm epson stylus color]] [[http://dialed.110mb.com/small/billie-mayers/ billie mayers kiss the rain]] [[http://mouse-zae.110mb.com/prove-mazda.htm prove mazda2]] [[http://unremig.110mb.com/casa-damiani/ casa damiani spa]] [[http://funk-mastah-ion.110mb.com/data/g-cellulari.htm g7050 cellulari lg]] [[http://some-omeelse.110mb.com/data/michel-viet.htm michel viet videos]] [[http://some-omeelse.110mb.com/data/sara.htm sara]] [[http://book-wench.110mb.com/text/new-born/ new born muse]] [[http://forever-your.110mb.com/data/diffusore-wireless.htm diffusore wireless]] [[http://lazythoughts.110mb.com/lib/simeu/ simeu]] [[http://book-wench.110mb.com/text/go-go/ go go go]] [[http://stitchesnglue.110mb.com/centro-assistenza.htm centro assistenza amstrad milano]] [[http://ultra-creator.110mb.com/articles/www-randonnee.htm www randonnee it]] [[http://blue-olusha.110mb.com/library/nu-virgos/ nu virgos stop stop free mp3]] [[http://nationavce.110mb.com/view/hepatozoonosis.htm hepatozoonosis]] [[http://slavkamolot.110mb.com/library/ghibellini/ ghibellini]] [[http://mouse-zae.110mb.com/pentacrinus.htm pentacrinus]] [[http://gekijuls.110mb.com/firmware-ab/ firmware ab sat]] [[http://trouble166.110mb.com/hong-nhung.htm hong nhung nude pictures]] [[http://yeeden.110mb.com/data/bmw-d/ bmw 525d touring]] [[http://lazythoughts.110mb.com/lib/nuova-citroen/ nuova citroen c3 benzina auto nuove]] [[http://olikka.110mb.com/library/prestito-pomezia.htm prestito pomezia]] [[http://sister-sunshine.110mb.com/html/punto-actual/ punto actual diesel]] [[http://funk-mastah-ion.110mb.com/data/costeau.htm costeau]] [[http://mouse-zae.110mb.com/these-boots.htm these boots are made for walking]] [[http://dialed.110mb.com/small/deus-adriano/ deus adriano celentano]] [[http://funk-mastah-ion.110mb.com/data/tommyu.htm tommyu]] [[http://stitchesnglue.110mb.com/penso-positivi.htm penso positivi jovanotti]] [[http://trouble166.110mb.com/roma-tel.htm roma tel aviv]] [[http://olikka.110mb.com/library/scientist.htm scientist]] [[http://blue-olusha.110mb.com/library/sposa-gio/ sposa gio]] [[http://nationavce.110mb.com/view/cant-fight.htm cant fight the moonlight]] [[http://slavkamolot.110mb.com/library/sgabelli-di/ sgabelli di legno]] [[http://mouse-zae.110mb.com/distribuzione-commerciale.htm distribuzione commerciale]] [[http://funk-mastah-ion.110mb.com/data/darkness-black.htm darkness black shuck]] [[http://ultra-creator.110mb.com/articles/momix.htm momix]] [[http://blue-olusha.110mb.com/library/cuba-volo/ cuba volo sola andata]] [[http://some-omeelse.110mb.com/data/piscina-pordenone.htm piscina pordenone]] [[http://trene-von-anty.110mb.com/description/fatti.htm fatti]] [[http://blue-olusha.110mb.com/library/placca-motrice/ placca motrice]] [[http://some-omeelse.110mb.com/data/la-ragazza.htm la ragazza fuoristrada]] [[http://forever-your.110mb.com/data/toyota-rav.htm toyota rav4 sol]] [[http://forever-your.110mb.com/data/quake-.htm quake 3 arriva su playstation 2]] [[http://slavkamolot.110mb.com/library/manamana/ manamana]] [[http://forever-your.110mb.com/data/big-hunter.htm big hunter]] [[http://trene-von-anty.110mb.com/description/muri-di.htm muri di sostegno]] [[http://funk-mastah-ion.110mb.com/data/vico.htm vico]] [[http://gekijuls.110mb.com/calibratura/ calibratura]] [[http://funk-mastah-ion.110mb.com/data/bubble-troubl.htm bubble troubl]] [[http://olikka.110mb.com/library/viaggi-e.htm viaggi e vacanze]] [[http://blue-olusha.110mb.com/library/www-winxclub/ www winxclub it]] [[http://gekijuls.110mb.com/hard-disk/ hard disk per foto]] [[http://dialed.110mb.com/small/antonello-de/ antonello de pierro zelig]] [[http://unremig.110mb.com/laser-brother/ laser brother fax]] [[http://nationavce.110mb.com/view/sesto-senso.htm sesto senso whirlpool]] [[http://lazythoughts.110mb.com/lib/playboy-magazine/ playboy magazine]] [[http://trouble166.110mb.com/acer-aspirewlmi.htm acer aspire1692wlmi]] [[http://olikka.110mb.com/library/elenco-albergo.htm elenco albergo venezia]] [[http://some-omeelse.110mb.com/data/video-paprika.htm video paprika gratis]] [[http://gekijuls.110mb.com/dacci-oggi/ dacci oggi i nostri soldi quotidiani]] [[http://ultra-creator.110mb.com/articles/federica-zarri.htm federica zarri viedo]] [[http://trene-von-anty.110mb.com/description/se-non.htm se non li conoscete]] [[http://forever-your.110mb.com/data/unreal-ii.htm unreal ii in alta risoluzione]] [[http://olikka.110mb.com/library/nokia-.htm nokia 1100 yellow]] [[http://trouble166.110mb.com/demichelis-alberto.htm demichelis alberto snc]] [[http://book-wench.110mb.com/text/sfondo-per/ sfondo per bigliettino della s cresima]] [[http://unremig.110mb.com/kd-shx/ kd shx751]] [[http://slavkamolot.110mb.com/library/custodia-alluminio/ custodia alluminio ipaq]] [[http://sister-sunshine.110mb.com/html/la-mesa/ la mesa k mas aplauda]] [[http://ultra-creator.110mb.com/articles/oliva-del.htm oliva del rio pornostar]] [[http://trene-von-anty.110mb.com/description/pensionata.htm pensionata]] [[http://book-wench.110mb.com/text/tastiere-musicali/ tastiere musicali karaoke]] [[http://book-wench.110mb.com/text/parker-vector/ parker vector 3]] [[http://yeeden.110mb.com/data/softcore/ softcore]] [[http://gekijuls.110mb.com/war-hammer/ war hammer]] [[http://blue-olusha.110mb.com/library/bir-istabul/ bir istabul masali]] [[http://stitchesnglue.110mb.com/sony-.htm sony  dcrhc19e]] [[http://stitchesnglue.110mb.com/scheda-audio.htm scheda audio audigy 2 zs]] [[http://funk-mastah-ion.110mb.com/data/tomb-raider.htm tomb raider ii]] [[http://dialed.110mb.com/small/gioco-playstation/ gioco playstation 1]] [[http://unremig.110mb.com/calcolo-valutazione/ calcolo valutazione auto usate]] [[http://unremig.110mb.com/cartina-geografica/ cartina geografica dell abbruzzo]] [[http://nationavce.110mb.com/view/cum-swallow.htm cum swallow]] [[http://funk-mastah-ion.110mb.com/data/dolce-e.htm dolce e gabbana blue]] [[http://gekijuls.110mb.com/dresden-dolls/ dresden dolls]] [[http://gekijuls.110mb.com/corona-boreale/ corona boreale]] [[http://sneezingpops.110mb.com/shox-rhythmic/ shox rhythmic]] [[http://book-wench.110mb.com/text/ram/ ram 2700]] [[http://gekijuls.110mb.com/polska/ polska]] [[http://olikka.110mb.com/library/incintri-supereva.htm incintri supereva it]] [[http://gekijuls.110mb.com/dvdr-princo/ dvdr princo 4 7 gb]] [[http://blue-olusha.110mb.com/library/porno-emily/ porno emily]] [[http://sneezingpops.110mb.com/ingegnere-settore/ ingegnere settore telecomunicazioni (regione lombardia  bergamo provincia)]] [[http://yeeden.110mb.com/data/direttive-su/ direttive su mp3]] [[http://forever-your.110mb.com/data/tim-roth.htm tim roth]] [[http://sneezingpops.110mb.com/la-tour/ la tour infernale]] [[http://lazythoughts.110mb.com/lib/bring-me/ bring me]] [[http://ultra-creator.110mb.com/articles/driver-download.htm driver download amic a276308a]] [[http://sister-sunshine.110mb.com/html/scandalo-cantante/ scandalo cantante croata video]] [[http://slavkamolot.110mb.com/library/le-pistole/ le pistole non discutono]] [[http://lazythoughts.110mb.com/lib/agriturismo-trieste/ agriturismo trieste]] [[http://nationavce.110mb.com/view/fax-multifunzione.htm fax multifunzione olivetti]] [[http://yeeden.110mb.com/data/maria-conchita/ maria conchita alonso]] [[http://lazythoughts.110mb.com/lib/lappa/ lappa]] [[http://yeeden.110mb.com/data/air-zoom/ air zoom miler nike]] [[http://nationavce.110mb.com/view/cowboys-fringants.htm cowboys fringants]] [[http://lazythoughts.110mb.com/lib/engelke-gerrit/ engelke gerrit]] [[http://ultra-creator.110mb.com/articles/monza-calcio.htm monza calcio]] [[http://mouse-zae.110mb.com/a-stampante.htm a3 stampante laser colori]] [[http://mouse-zae.110mb.com/hard-disk.htm hard disk toshiba 2 5]] [[http://trene-von-anty.110mb.com/description/stradario-europa.htm stradario europa]] [[http://lazythoughts.110mb.com/lib/samangan/ samangan]] [[http://funk-mastah-ion.110mb.com/data/alfaromeo.htm alfaromeo 164]] [[http://book-wench.110mb.com/text/donna-musica/ donna musica]] [[http://stitchesnglue.110mb.com/tenda-auto.htm tenda auto]] [[http://trene-von-anty.110mb.com/description/video-di.htm video di dragostea din tei]] [[http://forever-your.110mb.com/data/analisi-testo.htm analisi testo poetico]] [[http://blue-olusha.110mb.com/library/tits-job/ tits job]] [[http://slavkamolot.110mb.com/library/mysteria/ mysteria]] [[http://trouble166.110mb.com/digitale-terrestre.htm digitale terrestre telesystem 7 3]] [[http://ultra-creator.110mb.com/articles/aereoplani.htm aereoplani]] [[http://stitchesnglue.110mb.com/nomadi-e.htm nomadi e spagna]] [[http://stitchesnglue.110mb.com/la-scuola.htm la scuola delle vergini]] [[http://mouse-zae.110mb.com/mitsubishi-sport.htm mitsubishi sport]] [[http://lazythoughts.110mb.com/lib/kodak-fotocamere/ kodak fotocamere digitali]] [[http://yeeden.110mb.com/data/scarpa-running/ scarpa running]] [[http://stitchesnglue.110mb.com/www-eboy.htm www eboy it]] [[http://lazythoughts.110mb.com/lib/hyper-formation/ hyper formation soccer]] [[http://mouse-zae.110mb.com/bd-.htm bd 292 ai]] [[http://trouble166.110mb.com/savoia-gioielli.htm savoia gioielli]] [[http://slavkamolot.110mb.com/library/hardcore-punk/ hardcore punk]] [[http://trouble166.110mb.com/foto-monica.htm foto monica vanali]] [[http://funk-mastah-ion.110mb.com/data/il-sindacalista.htm il sindacalista]] [[http://gekijuls.110mb.com/pfg-italia/ pfg italia]] [[http://ultra-creator.110mb.com/articles/i-ll.htm i ll missing you di puffy daddy]] [[http://sneezingpops.110mb.com/il-rock/ il rock della k]] [[http://olikka.110mb.com/library/labia-cutting.htm labia cutting]] [[http://trouble166.110mb.com/canti-neocatecumenali.htm canti neocatecumenali]] [[http://olikka.110mb.com/library/viaggio-tour.htm viaggio tour operator]] [[http://blue-olusha.110mb.com/library/configurare-siemens/ configurare siemens mc60]] [[http://stitchesnglue.110mb.com/calbe-an.htm calbe an der saale]] [[http://book-wench.110mb.com/text/nadia-roma/ nadia roma]] [[http://funk-mastah-ion.110mb.com/data/il-tesoro.htm il tesoro di montecristo]] [[http://sister-sunshine.110mb.com/html/testi-di/ testi di mia martini]] [[http://trouble166.110mb.com/reel-fishing.htm reel fishing]] [[http://gekijuls.110mb.com/foto-di/ foto di milly dabbraccio]] [[http://trouble166.110mb.com/baltijsk.htm baltijsk]] [[http://sneezingpops.110mb.com/nokia-hsw/ nokia hs21w bluetooth]] [[http://olikka.110mb.com/library/panasonic-lcd.htm panasonic lcd tv]] [[http://nationavce.110mb.com/view/re.htm re]] [[http://gekijuls.110mb.com/serenata-celeste/ serenata celeste testo]] [[http://dialed.110mb.com/small/guida-delle/ guida delle hawaii]] [[http://blue-olusha.110mb.com/library/solo-gratis/ solo gratis]] [[http://ultra-creator.110mb.com/articles/strong.htm strong 8100]] [[http://blue-olusha.110mb.com/library/romeo-e/ romeo e juliette]] [[http://ultra-creator.110mb.com/articles/epson-epll.htm epson epl6200l]] [[http://gekijuls.110mb.com/knigge-adolf/ knigge adolf franz von]] [[http://unremig.110mb.com/colonna-vertebrale/ colonna vertebrale]] [[http://yeeden.110mb.com/data/fantasia-dvd/ fantasia dvd]] [[http://stitchesnglue.110mb.com/amstrad-lcd.htm amstrad lcd 16 9]] [[http://sister-sunshine.110mb.com/html/gadget-guardia/ gadget guardia di finanza]] [[http://blue-olusha.110mb.com/library/grep/ grep]] [[http://yeeden.110mb.com/data/tipografie/ tipografie]] [[http://forever-your.110mb.com/data/reichenbach.htm reichenbach]] [[http://gekijuls.110mb.com/inno-di/ inno di mameli cantato]] [[http://nationavce.110mb.com/view/frezy.htm frezy]] [[http://nationavce.110mb.com/view/nba-sport.htm nba sport]] [[http://mouse-zae.110mb.com/mercedes-e.htm mercedes e 270 cdi avangarde sw]] [[http://olikka.110mb.com/library/akmolinsk.htm akmolinsk]] [[http://dialed.110mb.com/small/mobili-giardino/ mobili giardino]] [[http://trene-von-anty.110mb.com/description/cristobal-del.htm cristobal del rio gonzalez libros]] [[http://slavkamolot.110mb.com/library/teenpinkvideos-com/ teenpinkvideos com]] [[http://stitchesnglue.110mb.com/testo-canzone.htm testo canzone crudele]] [[http://nationavce.110mb.com/view/nubira-sw.htm nubira sw]] [[http://blue-olusha.110mb.com/library/un-monton/ un monton]] [[http://unremig.110mb.com/vacanza-romagna/ vacanza romagna]] [[http://stitchesnglue.110mb.com/marilyn-manson.htm marilyn manson portrait of an american]] [[http://olikka.110mb.com/library/mauritius-tour.htm mauritius tour]] [[http://sister-sunshine.110mb.com/html/asciugabiancheria-classe/ asciugabiancheria classe d]] [[http://yeeden.110mb.com/data/gorilla-svampa/ gorilla svampa]] [[http://trene-von-anty.110mb.com/description/lavventura.htm lavventura]] [[http://sneezingpops.110mb.com/palla-di/ palla di fuoco]] [[http://stitchesnglue.110mb.com/yu-gi.htm yu gi oh gioco pc]] [[http://funk-mastah-ion.110mb.com/data/download-video.htm download video ostaggi]] [[http://trene-von-anty.110mb.com/description/chrysler-pt.htm chrysler pt]] [[http://trouble166.110mb.com/moje.htm moje]] == Just Power on the phone ==

Pinout :
* 1   5 volts
* 2 NC
* 3 NC
* 4 440kohm pulldown
* 5 GND

== Headset Mode ==

Pinout :
* 1 The phone suppiles a voltage to the headset through this pin
* 2 Left Out for Stereo Playback  or Mono Out  for handsfree 
* 3 Right Out for Stereo Playback or Mono In (mix for handsfree) 
* 4 102Kohm pulldown
* 5 GND

Depending on what you do (play mp3 / calling) the phone will either switch to stereo mode or handsfree mode.
The pins are either routed to the Stereo DAC of PCAP or to a Mono DAC and a Mono ACD in PCAP.

== Factory Test & Flash ==

There apears to be a way to force the phone to power-on even when there is NO battery present by applying an unknown voltage on pin 4. It is apparently used during manufacturing of the phones and might therefore be detected somehow by the bootloader. The only difference to USB accesory mode is that the phone powers on even without battery, and that the voltage on pin4 is different. Nothing is known about voltage / resistor to be used. On the other hand this is not an interesting mode anyway.

[[Category:Hardware]]
