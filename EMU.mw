== EMU (Enhanced Mini USB) ==

The A780 has a mini USB connector that motorola calls "Enhanced Mini USB" or in short "EMU". The Enhancement consists of several different modes that the port can be be swicthed into. The different modes are implemented by several analog CMOS switches and MOSFETs, which are controlled by the PCAP chip. Pin4 of the mini USB port is connected to a ADC inside the PCAP so that the voltage level on this pin can be measured by the BP, in order to identify a connected peripherial by simple resistor voltage dividers.

* Ordinary USB client, (i.e. the phone can emulate usb storage, usb modem etc, and charge the battery from the 5 volt USB supply)
* Charger., In this mode, the phone draws more current (up to 1,25A instead of the 500ma limit of USB host ports). 
* Car Charger,  
* Headset Interface (stereo audio out, mono mic in)
* A Async Serial Port (3volt / 0 volt logic level)
* A Factory Test and Flash Interface

The A780 has a mini USB connector that has some alternate pinout / functions.
There is code in the kernel sources /drivers/misc/ezx-emu.c.

== Charging modes ==
There are at least two different charging modes.
* Mode 1: The battery is '''not''' completely discharged. The CPU is running and can decide which kind of USB cable is attached. Power only or also data connection. In this mode you can use charging with USB data cable and USB power supply.
* Mode 2: The battery is '''completely discharged'''. The CPU is '''not''' running and so it could be not decided which kind of USB cable is attached. In this mode you can only use charging with USB power supply.


== Normal USB device/accesory mode ==

Pinout :
* 1 +5 volts input used to charge the phones battery at max 500ma.
* 2 Data-
* 3 Data+
* 4 (NC/left open) voltage at adc aprox 2,4-2,8 volt (there seems to be an internal pullup resistor of unknown value)
* 5 GND

In this mode, the Data- and Data+ lines will be routed to a USB transceiver located in PCAP chip, which is connected to the AP (PXA270) via the USB2 single ended interface (GPIO pins 34,35,36,39, 40, and 53). There is a 1,5kohm pullup resistor between the D+ as required by the USB standard to signal a high speed device (12mbits). This resistor is switchable by the PCAP bit BUSCTRL_USB_PU (+3,3volt or high Z). There is a second switchable pullup resistor on the d+ line which is used for charger detection.  This resistor seems to be switched off (high Z) when setting the PCAP bit BUSCTRL_VUSB_MSTR_EN. However this does not happen instantly but with some delay (about 5-10 sec).
It doesn't happen every time I tried. About 1 in 10 times it didn't work. It apears as if the firmware of the Baseband Processor is scanning from time to time the PCAP bits and then switches the resistor accordingly. I speculate therefore this resistor is connected to a GPIO on the Baseband processor and thats why there is no code in motorolas kernel.

== UART mode ==

Pinout :
* 1 NC
* 2 TXD
* 3 RXD
* 4 ???
* 5 GND

The routing of the analog switches is exactly the same as in USB client mode, but inside the PCAP chip, the USB transceiver is bypassed. TXD is bypassed to GPIO 39 of the AP (which is then TXD of FFUART) and RXD is bypassed to GPIO 53 (which is then RXD of FFUART). 
See drivers/misc/ezx-emu.c of the original kernel for code.

== Simple Charger ==

Pinout :
* 1 + 5 volts @ 500 ma
* 2 Short to pin 3
* 3 Short to pin 2
* 4 200kohm pulldown
* 5 GND

The Short between pin2 and pin3 is detected by a 200kohm pullup resistor on pin3 / d+ and a voltage comparator comparing pin2 and pin3.
It seems to be possible to switch this pullup resistor off by software.

Instead of having to do a short between pin 2 and 3, a pullup resistor between pin2 and pin1 (+5Vdc) can be used (50 or 100kOhm).

[[http://bloprofeldi.info/lib/putney-swope.htm putney swope]] [[http://saibso.org/mimosa-fiore.htm mimosa fiore]] [[http://kinunia.cn/bmw-.htm bmw 530 touring]] [[http://bloprofeldi.info/lib/lightn.htm lightn]] [[http://amohseni.info/img/styles/the-sister/ the sister]] [[http://psisemiya.com/images/small/erbe/ erbe]] [[http://psisemiya.com/images/small/lcd-smp/ lcd sm193p]] [[http://psisemiya.com/images/small/v-data/ v data 512]] [[http://bloprofeldi.info/lib/annuncio-casa.htm annuncio casa vacanza gratuiti]] [[http://ustall.org/web/venditore-tecnico.htm venditore tecnico - brindisi (regione puglia - brindisi provincia)]] [[http://helmed.info/topic/giochi-totalmente/ giochi totalmente gratuiti]] [[http://helmed.info/topic/clip-raggae/ clip raggae]] [[http://helmed.info/topic/gateshead/ gateshead]] [[http://psisemiya.com/images/small/scheda-video/ scheda video ati 9550 sapphire]] [[http://helmed.info/topic/philips-tv/ philips tv 32pw9309]] [[http://helmed.info/topic/insonnia/ insonnia]] [[http://helmed.info/topic/tenda-esterno/ tenda esterno]] [[http://davte.info/library/html/dv-rs.htm dv rs mmc 512]] [[http://saibso.org/un-milione.htm un milione di iscritti a xbox live]] [[http://ashythro.info/library/html/brad-pitt/ brad pitt butt]] [[http://bloprofeldi.info/lib/volume.htm volume]] [[http://ashythro.info/library/html/trucchi-soluzione/ trucchi soluzione giochi pc]] [[http://chaba.info/biglietti-europei/ biglietti europei 2004]] [[http://nobinters.org/new-car.htm new car prices]] [[http://amohseni.info/img/styles/si-banderas/ si banderas]] [[http://davte.info/library/html/arredamento-d.htm arredamento d interni]] [[http://ashythro.info/library/html/picture-hongnhung/ picture hongnhung]] [[http://saibso.org/acer-cr.htm acer cr6530]] [[http://chaba.info/ati-xxt/ ati x850xt]] [[http://nobinters.org/gossip-vari.htm gossip vari]] [[http://amohseni.info/img/styles/swv/ swv]] [[http://ashythro.info/library/html/testo-canzone/ testo canzone 2 black waves of luv]] [[http://chaba.info/hbh-bluetooth/ hbh600 bluetooth sony ericsson]] [[http://ashythro.info/library/html/fleurs/ fleurs 3]] [[http://chaba.info/hard-disk/ hard disk ps2]] [[http://davte.info/library/html/amilo-pro.htm amilo pro v7010 fujitsu-siemens]] [[http://psisemiya.com/images/small/conserviera-industria/ conserviera industria - macchine e attrezzature]] [[http://ustall.org/web/consulenza-internet.htm consulenza internet marketing]] [[http://chaba.info/sampei-vol/ sampei. vol. 05]] [[http://ustall.org/web/caricatore-cd.htm caricatore cd clarion]] [[http://davte.info/library/html/prezzo-motorino.htm prezzo motorino]] [[http://davte.info/library/html/frasi-della.htm frasi della amicizia]] [[http://amohseni.info/img/styles/deh/ deh 4700]] [[http://ashythro.info/library/html/pioneer-ar/ pioneer a-307r]] [[http://bloprofeldi.info/lib/nudo-maschio.htm nudo maschio]] [[http://helmed.info/topic/www-salernocity/ www salernocity com]] [[http://chaba.info/buzz/ buzz]] [[http://saibso.org/bela.htm bela]] [[http://helmed.info/topic/fugga/ fugga]] [[http://nobinters.org/simone-toscana.htm simone toscana]] [[http://bloprofeldi.info/lib/curriculm-vitae.htm curriculm vitae]] [[http://psisemiya.com/images/small/lowrider-arte/ lowrider arte]] [[http://davte.info/library/html/s-is.htm s1 is]] [[http://helmed.info/topic/sea-it/ sea it]] [[http://ustall.org/web/cominicacion.htm cominicacion]] [[http://ustall.org/web/annunci-rover.htm annunci rover mini cabriolet]] [[http://ustall.org/web/xink.htm xink]] [[http://saibso.org/infami.htm infami]] [[http://nobinters.org/e-in.htm e in rete il primo trailer di metal gear acid]] [[http://psisemiya.com/images/small/ddr-pc/ ddr pc2700 a 333mhz]] [[http://bloprofeldi.info/lib/nuova-audi.htm nuova audi a3 benzina auto nuove]] [[http://ustall.org/web/enricke.htm enricke]] [[http://ashythro.info/library/html/km-fiat/ km0 fiat panda diesel auto km 0]] [[http://chaba.info/regolamento-gioco/ regolamento gioco bridge]] [[http://davte.info/library/html/ngage-accessori.htm n-gage accessori]] [[http://saibso.org/videocamere-sony.htm videocamere sony mini dv]] [[http://amohseni.info/img/styles/gruppo-amici/ gruppo amici]] [[http://saibso.org/google-nel.htm google nel web]] [[http://saibso.org/accessori-fotocamere.htm accessori fotocamere digitali hp]] [[http://amohseni.info/img/styles/sfondi-x/ sfondi x pc gratis]] [[http://ashythro.info/library/html/sota-industries/ sota industries]] [[http://psisemiya.com/images/small/jedi/ jedi]] [[http://helmed.info/topic/festa-spettacolo/ festa spettacolo festa]] [[http://helmed.info/topic/nokia-/ nokia 9500 i]] [[http://chaba.info/iz-israel/ iz israel kamakawiwo]] [[http://psisemiya.com/images/small/thalia-la/ thalia la vida en rosa]] [[http://bloprofeldi.info/lib/macchu-picchu.htm macchu picchu]] [[http://kinunia.cn/wave-to.htm wave to luv]] [[http://psisemiya.com/images/small/tiziana-lodato/ tiziana lodato]] [[http://ustall.org/web/pampita-modelo.htm pampita modelo]] [[http://kinunia.cn/www-las.htm www las chuches com]] [[http://nobinters.org/di-castro.htm di castro]] [[http://kinunia.cn/flinstones-nudi.htm flinstones nudi]] [[http://psisemiya.com/images/small/www-la/ www la talpa it]] [[http://nobinters.org/babyliss.htm babyliss 8310]] [[http://saibso.org/kyocera-mita.htm kyocera mita]] [[http://helmed.info/topic/placebo/ placebo]] [[http://bloprofeldi.info/lib/for-you.htm for you babies]] [[http://davte.info/library/html/sodimm-memoria.htm so-dimm memoria ram]] [[http://ustall.org/web/nec-lcd.htm nec lcd 15 52vm]] [[http://amohseni.info/img/styles/trova-lavoro/ trova lavoro offerte]] [[http://chaba.info/foto-di/ foto di carmen di pietro]] [[http://chaba.info/falstaff/ falstaff]] [[http://psisemiya.com/images/small/universita-ancona/ universita ancona politecnico]] [[http://nobinters.org/sesso-brasiliano.htm sesso brasiliano]] [[http://kinunia.cn/symphony.htm symphony]] [[http://bloprofeldi.info/lib/mp-con.htm mp3 con hard disk]] [[http://davte.info/library/html/condizionatori-fissi.htm condizionatori fissi 9000 btu]] [[http://saibso.org/kan-kun.htm kan kun]] [[http://amohseni.info/img/styles/calendari-feticisti/ calendari feticisti]] [[http://saibso.org/formula-one.htm formula one 2002]] [[http://nobinters.org/kamikaze-a.htm kamikaze a colori]] [[http://nobinters.org/espositori-porte.htm espositori porte]] [[http://chaba.info/dragon-naturallyspeaking/ dragon naturallyspeaking preferred 7]] [[http://davte.info/library/html/legge.htm legge 392 1978]] [[http://helmed.info/topic/testo-fk/ testo fk it]] [[http://amohseni.info/img/styles/eventi-firenze/ eventi firenze]] [[http://bloprofeldi.info/lib/liftiba.htm liftiba]] [[http://psisemiya.com/images/small/anche-la/ anche la notte del corvo in italiano]] [[http://chaba.info/fotocamera-sony/ fotocamera sony dsc p100]] [[http://amohseni.info/img/styles/office/ office 2003]] [[http://saibso.org/master-sound.htm master sound reference 845]] [[http://ashythro.info/library/html/network-attached/ network attached]] [[http://bloprofeldi.info/lib/logitech-quickcam.htm logitech quickcam communicate]] [[http://ustall.org/web/lexmark-toner.htm lexmark toner x215]] [[http://saibso.org/pittura-a.htm pittura a calce foto]] [[http://amohseni.info/img/styles/lcd-al/ lcd al1715]] [[http://saibso.org/nexave-ax.htm nexave ax spinning]] [[http://nobinters.org/leva.htm leva]] [[http://psisemiya.com/images/small/concorso-guardia/ concorso guardia finanza]] [[http://psisemiya.com/images/small/dip-it/ dip it low remix]] [[http://psisemiya.com/images/small/test-per/ test per il patentino]] [[http://amohseni.info/img/styles/cuffie-con/ cuffie con microfono usb]] [[http://amohseni.info/img/styles/av-x/ a7v600 x]] [[http://nobinters.org/frameless.htm frameless]] [[http://ustall.org/web/il-piu.htm il piu grande motore del mondo]] [[http://ustall.org/web/canon-custodia.htm canon custodia]] [[http://davte.info/library/html/lancaster-la.htm lancaster la perla nera]] [[http://chaba.info/toxoplasma-igm/ toxoplasma igm]] [[http://bloprofeldi.info/lib/libertango-ensemble.htm libertango ensemble]] [[http://amohseni.info/img/styles/jvc-kd/ jvc kd - avx1]] [[http://chaba.info/rosmarino/ rosmarino]] [[http://chaba.info/ditta-light/ ditta light tech]] [[http://kinunia.cn/yara.htm yara]] [[http://helmed.info/topic/ingrossi-cartoleria/ ingrossi cartoleria giocattoli]] [[http://helmed.info/topic/playstation-/ playstation 2 e blu-ray insieme]] [[http://bloprofeldi.info/lib/ikonomi.htm ikonomi]] [[http://saibso.org/kakogawa.htm kakogawa]] [[http://ashythro.info/library/html/pedro-canoero/ pedro canoero]] [[http://chaba.info/tv-plasma/ tv plasma 50]] [[http://kinunia.cn/e-.htm e 400 cdi]] [[http://helmed.info/topic/the-sims/ the sims 2 all]] [[http://chaba.info/capsule-mirtillo/ capsule mirtillo]] [[http://davte.info/library/html/lacie.htm lacie 400]] [[http://bloprofeldi.info/lib/brother-t.htm brother t-104]] [[http://chaba.info/epson-c/ epson c900]] [[http://saibso.org/mne-s.htm mne s toboj]] [[http://amohseni.info/img/styles/foto-tortuga/ foto tortuga]] [[http://nobinters.org/quiero-saber.htm quiero saber de ti]] [[http://davte.info/library/html/legge-n.htm legge n 388 del 2000]] [[http://bloprofeldi.info/lib/i-belong.htm i belong to myself]] [[http://psisemiya.com/images/small/immagini-di/ immagini di romeo e giulietta]] [[http://ashythro.info/library/html/sex-bestial/ sex bestial]] [[http://chaba.info/nokia-con/ nokia con radio fm]] [[http://davte.info/library/html/alfa-romeo.htm alfa romeo 146]] [[http://chaba.info/gena-lee/ gena lee nolin hard video]] [[http://davte.info/library/html/tutto-wind.htm tutto wind]] [[http://ustall.org/web/bracciali-anello.htm bracciali anello]] [[http://chaba.info/bongi-bongi/ bongi bongi bon]] [[http://kinunia.cn/oroscopo-anno.htm oroscopo anno]] [[http://chaba.info/lindsey-lohan/ lindsey lohan]] [[http://psisemiya.com/images/small/la-ultima/ la ultima cena]] [[http://amohseni.info/img/styles/plextor-dvd/ plextor dvd masterizzatore esterno]] [[http://davte.info/library/html/volvo-varese.htm volvo varese]] [[http://chaba.info/sony-dsc/ sony dsc p200 black]] [[http://helmed.info/topic/internet-spazio/ internet spazio web]] [[http://saibso.org/king-of.htm king of convience]] [[http://bloprofeldi.info/lib/la-rosa.htm la rosa di washington]] [[http://saibso.org/fever-for.htm fever for the flava hot action cop]] [[http://bloprofeldi.info/lib/software-decoder.htm software decoder encoder]] [[http://nobinters.org/gin-rummy.htm gin rummy]] [[http://ashythro.info/library/html/pioneer-vsxaxais/ pioneer vsx-ax5ai-s]] [[http://saibso.org/luana-piovanni.htm luana piovanni]] [[http://kinunia.cn/www-theclub.htm www theclub it]] [[http://chaba.info/mp-u/ mp3 u2]] [[http://psisemiya.com/images/small/aldrovandi-ulisse/ aldrovandi, ulisse]] [[http://bloprofeldi.info/lib/termometro-oregon.htm termometro oregon]] [[http://amohseni.info/img/styles/volkswagen-diesel/ volkswagen diesel km0]] [[http://amohseni.info/img/styles/kenwood-mestre/ kenwood mestre]] [[http://chaba.info/elisa-dancing/ elisa dancing testo]] [[http://chaba.info/osg/ osg]] [[http://davte.info/library/html/panasonic-cellulare.htm panasonic cellulare vs3]] [[http://bloprofeldi.info/lib/gioche-di.htm gioche di memoria]] [[http://ashythro.info/library/html/dvd-decrypter/ dvd decrypter]] [[http://psisemiya.com/images/small/blue-curtain/ blue curtain falls mp3]] [[http://chaba.info/dvd-blade/ dvd blade]] [[http://kinunia.cn/basculanti.htm basculanti]] [[http://helmed.info/topic/oil-city/ oil city]] [[http://amohseni.info/img/styles/toner-epson/ toner epson epl]] [[http://bloprofeldi.info/lib/la-mia.htm la mia compagna di classe]] [[http://bloprofeldi.info/lib/freewere.htm freewere]] [[http://saibso.org/sun-star.htm sun star office]] [[http://bloprofeldi.info/lib/una-rosa.htm una rosa per te]] [[http://chaba.info/manuale-word/ manuale word]] [[http://davte.info/library/html/deep-dish.htm deep dish flash dance]] [[http://davte.info/library/html/pentium-.htm pentium 4 3 3 ghz]] [[http://amohseni.info/img/styles/bulma-chichi/ bulma chichi c18]] [[http://psisemiya.com/images/small/safriduo/ safriduo]] [[http://bloprofeldi.info/lib/click-.htm click 6 go]] [[http://saibso.org/fack-it.htm fack it imon]] == Fast Charger ==
Pinout :
* 1   5 volts @ 1,250 ma
* 2 Short to pin 3
* 3 short to pin 2
* 4 440kohm pulldown
* 5 GND

== Just Power on the phone ==

Pinout :
* 1 + 5 volts
* 2 NC
* 3 NC
* 4 440kohm pulldown
* 5 GND

== Headset Mode ==

Pinout :
* 1 The phone suppiles a voltage to the headset through this pin
* 2 Left Out for Stereo Playback  or Mono Out  for handsfree 
* 3 Right Out for Stereo Playback or Mono In (mix for handsfree) 
* 4 102Kohm pulldown
* 5 GND

Depending on what you do (play mp3 / calling) the phone will either switch to stereo mode or handsfree mode.
The pins are either routed to the Stereo DAC of PCAP or to a Mono DAC and a Mono ACD in PCAP.

== Factory Test & Flash ==

There apears to be a way to force the phone to power-on even when there is NO battery present by applying an unknown voltage on pin 4. It is apparently used during manufacturing of the phones and might therefore be detected somehow by the bootloader. The only difference to USB accesory mode is that the phone powers on even without battery, and that the voltage on pin4 is different. Nothing is known about voltage / resistor to be used. On the other hand this is not an interesting mode anyway.

[[Category:Hardware]]
