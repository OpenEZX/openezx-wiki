The EZX kernel tree bases on a [http://www.kernel.org vanilla 2.6 kernel]. At the moment we use 2.6.16, but 2.6.17 is on the way.

We use [http://savannah.nongnu.org/projects/quilt quilt] to handle our -ezx kernel tree. You can find the latest patchset [http://people.openezx.org/stefan/patches/patches-2.6.16-2.6.16.13-exz6-symlink-fix.tar.bz2 here].

Please notice that the development is still in an early state. You should know what you are doing, if you test this.

== Building EZX kernel with ezx-crosstool ==

Obviously you need to get ezx-crosstool first. We have some information about how to [[Crosscompile|setup]].

Next step should be to get a vanilla kernel and our patchset.

With crosscompiler and patchset you should be able to compile new kernels with just this line:

 make ARCH=arm CROSS_COMPILE=arm-linux- zImage

If everything works fine you can find the zImage in arch/arm/boot/ . You can use this zImage together with [[Bootloader#Communication_with_the_bootloader|boot_usb]] to boot the phone with this kernel once.

== Building EZX kernel with openembedded ==

* Setup OE according to http://www.openembedded.org/wiki/GettingStarted
* Use MACHINE=a780 and DISTRO=ezx
* 'bitbake virtual/kernel'

== Building kernel modules for the original Motorola kernel ==

Change the EXTRAVERSION in kernel Makefile to _mvlcee30-mainstone instead of _pnail.

Steps:
Download the [http://www.motorolafans.com/index.php?name=Downloads&file=details&id=197 patch] for the [http://sourceforge.net/projects/e680 kernel] from ''download->E680i/A780->scripts/programs'' section.

 gzip -cd patch-2.4.17-pnail-0.1.gz | patch -p0
 cd linux-2.4.17
 cp arch/arm/def-configs/ezx-780 .config
 make ARCH=arm CROSS_COMPILE=arm-linux- oldconfig
 make ARCH=arm CROSS_COMPILE=arm-linux- dep
 make ARCH=arm CROSS_COMPILE=arm-linux- zImage
 make ARCH=arm CROSS_COMPILE=arm-linux- modules

[[Category:Development]]
