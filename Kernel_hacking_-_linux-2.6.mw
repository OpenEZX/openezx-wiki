The OpenEZX kernel tree bases on a [http://www.kernel.org vanilla 2.6 kernel]. At the moment we use 2.6.21.

We use [http://savannah.nongnu.org/projects/quilt quilt] to handle our -ezx kernel tree. You can find the latest patchset [http://svn.openezx.org/trunk/src/kernel-2.6/patches/ here].

Please notice that the development is still in an early state. You should know what you are doing, if you test this.

 == Building OpenEZX kernel with openembedded ==

* Setup OE according to http://www.openembedded.org/wiki/GettingStarted
 * Note: BitBake 1.6.8 or higher is required. FC6 RPM of BitBake is currently version 1.6.6, so it will not work.
   Recommended way is running it without install.
 * Use <tt>MACHINE=a780</tt> and <tt>DISTRO=angstrom-2007.1</tt> in local.conf
* Apply OpenEZX patches
 * Copy http://svn.openezx.org/trunk/src/kernel-2.6/patches/ to the Linux source tree
 * Run <tt>$ quilt push -a</tt>
* Run <tt>$ bitbake virtual/kernel</tt>


You can also use OE toolchain by hand if you need it, just run:

 PATH=$PATH:/path_to_OE/build/tmp/cross/bin make ARCH=arm CROSS_COMPILE=arm-angstrom-linux-gnueabi-

setting the path to suit your OE setup.

 === Notes ===
* the kernel built with OE expects the rootfs on the '''first''' partition of external flash (<tt>root=/dev/mmcblk0p1</tt>),
* while the default OpenEZX config expects it on the '''second''' partition (<tt>root=/dev/mmcblk0p2</tt>); with this setup you can use the first partition to store some data and access it when booting the original software.
* by default this '''second''' partition must be ext3 fs.
* The STUART console is disabled by default to speed up the booting process. If you want to re-enable it, you have to apply ''ezx-enable-stuart.patch'', and add <tt>console=ttyS2,115200n8</tt> to your <tt>CONFIG_CMDLINE</tt>.

You can use the zImage together with [[Bootloader#Communication_with_the_bootloader|boot_usb]] to boot the phone with this kernel.

[[Category:Development]]
